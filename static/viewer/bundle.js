"use strict";(()=>{function be(e){let i=e.length;for(;--i>=0;)e[i]=0}var wn=0,Ti=1,vn=2,kn=3,yn=258,Nt=29,De=256,ze=De+1+Nt,ce=30,At=19,xi=2*ze+1,ie=15,at=16,Cn=7,Tt=256,Ii=16,Ri=17,Si=18,mt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ke=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),$n=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Di=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),En=512,X=new Array((ze+2)*2);be(X);var Ce=new Array(ce*2);be(Ce);var Ne=new Array(En);be(Ne);var Ae=new Array(yn-kn+1);be(Ae);var xt=new Array(Nt);be(xt);var Be=new Array(ce);be(Be);function st(e,i,t,n,a){this.static_tree=e,this.extra_bits=i,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}var Li,Mi,Pi;function rt(e,i){this.dyn_tree=e,this.max_code=0,this.stat_desc=i}var Ui=e=>e<256?Ne[e]:Ne[256+(e>>>7)],Te=(e,i)=>{e.pending_buf[e.pending++]=i&255,e.pending_buf[e.pending++]=i>>>8&255},M=(e,i,t)=>{e.bi_valid>at-t?(e.bi_buf|=i<<e.bi_valid&65535,Te(e,e.bi_buf),e.bi_buf=i>>at-e.bi_valid,e.bi_valid+=t-at):(e.bi_buf|=i<<e.bi_valid&65535,e.bi_valid+=t)},G=(e,i,t)=>{M(e,t[i*2],t[i*2+1])},Vi=(e,i)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--i>0);return t>>>1},zn=e=>{e.bi_valid===16?(Te(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Nn=(e,i)=>{let t=i.dyn_tree,n=i.max_code,a=i.stat_desc.static_tree,s=i.stat_desc.has_stree,f=i.stat_desc.extra_bits,l=i.stat_desc.extra_base,d=i.stat_desc.max_length,o,h,b,c,u,p,T=0;for(c=0;c<=ie;c++)e.bl_count[c]=0;for(t[e.heap[e.heap_max]*2+1]=0,o=e.heap_max+1;o<xi;o++)h=e.heap[o],c=t[t[h*2+1]*2+1]+1,c>d&&(c=d,T++),t[h*2+1]=c,!(h>n)&&(e.bl_count[c]++,u=0,h>=l&&(u=f[h-l]),p=t[h*2],e.opt_len+=p*(c+u),s&&(e.static_len+=p*(a[h*2+1]+u)));if(T!==0){do{for(c=d-1;e.bl_count[c]===0;)c--;e.bl_count[c]--,e.bl_count[c+1]+=2,e.bl_count[d]--,T-=2}while(T>0);for(c=d;c!==0;c--)for(h=e.bl_count[c];h!==0;)b=e.heap[--o],!(b>n)&&(t[b*2+1]!==c&&(e.opt_len+=(c-t[b*2+1])*t[b*2],t[b*2+1]=c),h--)}},Zi=(e,i,t)=>{let n=new Array(ie+1),a=0,s,f;for(s=1;s<=ie;s++)a=a+t[s-1]<<1,n[s]=a;for(f=0;f<=i;f++){let l=e[f*2+1];l!==0&&(e[f*2]=Vi(n[l]++,l))}},An=()=>{let e,i,t,n,a,s=new Array(ie+1);for(t=0,n=0;n<Nt-1;n++)for(xt[n]=t,e=0;e<1<<mt[n];e++)Ae[t++]=n;for(Ae[t-1]=n,a=0,n=0;n<16;n++)for(Be[n]=a,e=0;e<1<<Ke[n];e++)Ne[a++]=n;for(a>>=7;n<ce;n++)for(Be[n]=a<<7,e=0;e<1<<Ke[n]-7;e++)Ne[256+a++]=n;for(i=0;i<=ie;i++)s[i]=0;for(e=0;e<=143;)X[e*2+1]=8,e++,s[8]++;for(;e<=255;)X[e*2+1]=9,e++,s[9]++;for(;e<=279;)X[e*2+1]=7,e++,s[7]++;for(;e<=287;)X[e*2+1]=8,e++,s[8]++;for(Zi(X,ze+1,s),e=0;e<ce;e++)Ce[e*2+1]=5,Ce[e*2]=Vi(e,5);Li=new st(X,mt,De+1,ze,ie),Mi=new st(Ce,Ke,0,ce,ie),Pi=new st(new Array(0),$n,0,At,Cn)},Hi=e=>{let i;for(i=0;i<ze;i++)e.dyn_ltree[i*2]=0;for(i=0;i<ce;i++)e.dyn_dtree[i*2]=0;for(i=0;i<At;i++)e.bl_tree[i*2]=0;e.dyn_ltree[Tt*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Fi=e=>{e.bi_valid>8?Te(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Wt=(e,i,t,n)=>{let a=i*2,s=t*2;return e[a]<e[s]||e[a]===e[s]&&n[i]<=n[t]},ot=(e,i,t)=>{let n=e.heap[t],a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&Wt(i,e.heap[a+1],e.heap[a],e.depth)&&a++,!Wt(i,n,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=n},Kt=(e,i,t)=>{let n,a,s=0,f,l;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+s++]&255,n+=(e.pending_buf[e.sym_buf+s++]&255)<<8,a=e.pending_buf[e.sym_buf+s++],n===0?G(e,a,i):(f=Ae[a],G(e,f+De+1,i),l=mt[f],l!==0&&(a-=xt[f],M(e,a,l)),n--,f=Ui(n),G(e,f,t),l=Ke[f],l!==0&&(n-=Be[f],M(e,n,l)));while(s<e.sym_next);G(e,Tt,i)},wt=(e,i)=>{let t=i.dyn_tree,n=i.stat_desc.static_tree,a=i.stat_desc.has_stree,s=i.stat_desc.elems,f,l,d=-1,o;for(e.heap_len=0,e.heap_max=xi,f=0;f<s;f++)t[f*2]!==0?(e.heap[++e.heap_len]=d=f,e.depth[f]=0):t[f*2+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=d<2?++d:0,t[o*2]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=n[o*2+1]);for(i.max_code=d,f=e.heap_len>>1;f>=1;f--)ot(e,t,f);o=s;do f=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ot(e,t,1),l=e.heap[1],e.heap[--e.heap_max]=f,e.heap[--e.heap_max]=l,t[o*2]=t[f*2]+t[l*2],e.depth[o]=(e.depth[f]>=e.depth[l]?e.depth[f]:e.depth[l])+1,t[f*2+1]=t[l*2+1]=o,e.heap[1]=o++,ot(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Nn(e,i),Zi(t,d,e.bl_count)},Bt=(e,i,t)=>{let n,a=-1,s,f=i[1],l=0,d=7,o=4;for(f===0&&(d=138,o=3),i[(t+1)*2+1]=65535,n=0;n<=t;n++)s=f,f=i[(n+1)*2+1],!(++l<d&&s===f)&&(l<o?e.bl_tree[s*2]+=l:s!==0?(s!==a&&e.bl_tree[s*2]++,e.bl_tree[Ii*2]++):l<=10?e.bl_tree[Ri*2]++:e.bl_tree[Si*2]++,l=0,a=s,f===0?(d=138,o=3):s===f?(d=6,o=3):(d=7,o=4))},Xt=(e,i,t)=>{let n,a=-1,s,f=i[1],l=0,d=7,o=4;for(f===0&&(d=138,o=3),n=0;n<=t;n++)if(s=f,f=i[(n+1)*2+1],!(++l<d&&s===f)){if(l<o)do G(e,s,e.bl_tree);while(--l!==0);else s!==0?(s!==a&&(G(e,s,e.bl_tree),l--),G(e,Ii,e.bl_tree),M(e,l-3,2)):l<=10?(G(e,Ri,e.bl_tree),M(e,l-3,3)):(G(e,Si,e.bl_tree),M(e,l-11,7));l=0,a=s,f===0?(d=138,o=3):s===f?(d=6,o=3):(d=7,o=4)}},Tn=e=>{let i;for(Bt(e,e.dyn_ltree,e.l_desc.max_code),Bt(e,e.dyn_dtree,e.d_desc.max_code),wt(e,e.bl_desc),i=At-1;i>=3&&e.bl_tree[Di[i]*2+1]===0;i--);return e.opt_len+=3*(i+1)+5+5+4,i},xn=(e,i,t,n)=>{let a;for(M(e,i-257,5),M(e,t-1,5),M(e,n-4,4),a=0;a<n;a++)M(e,e.bl_tree[Di[a]*2+1],3);Xt(e,e.dyn_ltree,i-1),Xt(e,e.dyn_dtree,t-1)},In=e=>{let i=4093624447,t;for(t=0;t<=31;t++,i>>>=1)if(i&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return 1;for(t=32;t<De;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},Yt=!1,Rn=e=>{Yt||(An(),Yt=!0),e.l_desc=new rt(e.dyn_ltree,Li),e.d_desc=new rt(e.dyn_dtree,Mi),e.bl_desc=new rt(e.bl_tree,Pi),e.bi_buf=0,e.bi_valid=0,Hi(e)},Oi=(e,i,t,n)=>{M(e,(wn<<1)+(n?1:0),3),Fi(e),Te(e,t),Te(e,~t),t&&e.pending_buf.set(e.window.subarray(i,i+t),e.pending),e.pending+=t},Sn=e=>{M(e,Ti<<1,3),G(e,Tt,X),zn(e)},Dn=(e,i,t,n)=>{let a,s,f=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=In(e)),wt(e,e.l_desc),wt(e,e.d_desc),f=Tn(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=t+5,t+4<=a&&i!==-1?Oi(e,i,t,n):e.strategy===4||s===a?(M(e,(Ti<<1)+(n?1:0),3),Kt(e,X,Ce)):(M(e,(vn<<1)+(n?1:0),3),xn(e,e.l_desc.max_code+1,e.d_desc.max_code+1,f+1),Kt(e,e.dyn_ltree,e.dyn_dtree)),Hi(e),n&&Fi(e)},Ln=(e,i,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=i,e.pending_buf[e.sym_buf+e.sym_next++]=i>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,i===0?e.dyn_ltree[t*2]++:(e.matches++,i--,e.dyn_ltree[(Ae[t]+De+1)*2]++,e.dyn_dtree[Ui(i)*2]++),e.sym_next===e.sym_end),Mn=Rn,Pn=Oi,Un=Dn,Vn=Ln,Zn=Sn,Hn={_tr_init:Mn,_tr_stored_block:Pn,_tr_flush_block:Un,_tr_tally:Vn,_tr_align:Zn},Fn=(e,i,t,n)=>{let a=e&65535|0,s=e>>>16&65535|0,f=0;for(;t!==0;){f=t>2e3?2e3:t,t-=f;do a=a+i[n++]|0,s=s+a|0;while(--f);a%=65521,s%=65521}return a|s<<16|0},xe=Fn,On=()=>{let e,i=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;i[t]=e}return i},Gn=new Uint32Array(On()),Wn=(e,i,t,n)=>{let a=Gn,s=n+t;e^=-1;for(let f=n;f<s;f++)e=e>>>8^a[(e^i[f])&255];return e^-1},R=Wn,se={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},le={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Kn,_tr_stored_block:vt,_tr_flush_block:Bn,_tr_tally:j,_tr_align:Xn}=Hn,{Z_NO_FLUSH:Q,Z_PARTIAL_FLUSH:Yn,Z_FULL_FLUSH:qn,Z_FINISH:V,Z_BLOCK:qt,Z_OK:S,Z_STREAM_END:Jt,Z_STREAM_ERROR:W,Z_DATA_ERROR:Jn,Z_BUF_ERROR:lt,Z_DEFAULT_COMPRESSION:jn,Z_FILTERED:Qn,Z_HUFFMAN_ONLY:He,Z_RLE:ea,Z_FIXED:ta,Z_DEFAULT_STRATEGY:ia,Z_UNKNOWN:na,Z_DEFLATED:qe}=le,aa=9,sa=15,ra=8,oa=29,la=256,kt=la+1+oa,fa=30,ha=19,ua=2*kt+1,da=15,y=3,J=258,K=J+y+1,ca=32,_e=42,It=57,yt=69,Ct=73,$t=91,Et=103,ne=113,ke=666,L=1,ge=2,re=3,me=4,_a=3,ae=(e,i)=>(e.msg=se[i],i),jt=e=>e*2-(e>4?9:0),q=e=>{let i=e.length;for(;--i>=0;)e[i]=0},pa=e=>{let i,t,n,a=e.w_size;i=e.hash_size,n=i;do t=e.head[--n],e.head[n]=t>=a?t-a:0;while(--i);i=a,n=i;do t=e.prev[--n],e.prev[n]=t>=a?t-a:0;while(--i)},ba=(e,i,t)=>(i<<e.hash_shift^t)&e.hash_mask,ee=ba,P=e=>{let i=e.state,t=i.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+t),e.next_out),e.next_out+=t,i.pending_out+=t,e.total_out+=t,e.avail_out-=t,i.pending-=t,i.pending===0&&(i.pending_out=0))},U=(e,i)=>{Bn(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,i),e.block_start=e.strstart,P(e.strm)},z=(e,i)=>{e.pending_buf[e.pending++]=i},ve=(e,i)=>{e.pending_buf[e.pending++]=i>>>8&255,e.pending_buf[e.pending++]=i&255},zt=(e,i,t,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,i.set(e.input.subarray(e.next_in,e.next_in+a),t),e.state.wrap===1?e.adler=xe(e.adler,i,a,t):e.state.wrap===2&&(e.adler=R(e.adler,i,a,t)),e.next_in+=a,e.total_in+=a,a)},Gi=(e,i)=>{let t=e.max_chain_length,n=e.strstart,a,s,f=e.prev_length,l=e.nice_match,d=e.strstart>e.w_size-K?e.strstart-(e.w_size-K):0,o=e.window,h=e.w_mask,b=e.prev,c=e.strstart+J,u=o[n+f-1],p=o[n+f];e.prev_length>=e.good_match&&(t>>=2),l>e.lookahead&&(l=e.lookahead);do if(a=i,!(o[a+f]!==p||o[a+f-1]!==u||o[a]!==o[n]||o[++a]!==o[n+1])){n+=2,a++;do;while(o[++n]===o[++a]&&o[++n]===o[++a]&&o[++n]===o[++a]&&o[++n]===o[++a]&&o[++n]===o[++a]&&o[++n]===o[++a]&&o[++n]===o[++a]&&o[++n]===o[++a]&&n<c);if(s=J-(c-n),n=c-J,s>f){if(e.match_start=i,f=s,s>=l)break;u=o[n+f-1],p=o[n+f]}}while((i=b[i&h])>d&&--t!==0);return f<=e.lookahead?f:e.lookahead},pe=e=>{let i=e.w_size,t,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-K)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),pa(e),n+=i),e.strm.avail_in===0)break;if(t=zt(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=y)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=ee(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=ee(e,e.ins_h,e.window[a+y-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<y)););}while(e.lookahead<K&&e.strm.avail_in!==0)},Wi=(e,i)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,s,f=0,l=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>s&&(n=s),n<t&&(n===0&&i!==V||i===Q||n!==a+e.strm.avail_in)))break;f=i===V&&n===a+e.strm.avail_in?1:0,vt(e,0,0,f),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,P(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(zt(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(f===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),f?me:i!==Q&&i!==V&&e.strm.avail_in===0&&e.strstart===e.block_start?ge:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(zt(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,t=s>e.w_size?e.w_size:s,a=e.strstart-e.block_start,(a>=t||(a||i===V)&&i!==Q&&e.strm.avail_in===0&&a<=s)&&(n=a>s?s:a,f=i===V&&e.strm.avail_in===0&&n===a?1:0,vt(e,e.block_start,n,f),e.block_start+=n,P(e.strm)),f?re:L)},ft=(e,i)=>{let t,n;for(;;){if(e.lookahead<K){if(pe(e),e.lookahead<K&&i===Q)return L;if(e.lookahead===0)break}if(t=0,e.lookahead>=y&&(e.ins_h=ee(e,e.ins_h,e.window[e.strstart+y-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-K&&(e.match_length=Gi(e,t)),e.match_length>=y)if(n=j(e,e.strstart-e.match_start,e.match_length-y),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=y){e.match_length--;do e.strstart++,e.ins_h=ee(e,e.ins_h,e.window[e.strstart+y-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ee(e,e.ins_h,e.window[e.strstart+1]);else n=j(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(U(e,!1),e.strm.avail_out===0))return L}return e.insert=e.strstart<y-1?e.strstart:y-1,i===V?(U(e,!0),e.strm.avail_out===0?re:me):e.sym_next&&(U(e,!1),e.strm.avail_out===0)?L:ge},ue=(e,i)=>{let t,n,a;for(;;){if(e.lookahead<K){if(pe(e),e.lookahead<K&&i===Q)return L;if(e.lookahead===0)break}if(t=0,e.lookahead>=y&&(e.ins_h=ee(e,e.ins_h,e.window[e.strstart+y-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=y-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-K&&(e.match_length=Gi(e,t),e.match_length<=5&&(e.strategy===Qn||e.match_length===y&&e.strstart-e.match_start>4096)&&(e.match_length=y-1)),e.prev_length>=y&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-y,n=j(e,e.strstart-1-e.prev_match,e.prev_length-y),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=ee(e,e.ins_h,e.window[e.strstart+y-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=y-1,e.strstart++,n&&(U(e,!1),e.strm.avail_out===0))return L}else if(e.match_available){if(n=j(e,0,e.window[e.strstart-1]),n&&U(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return L}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=j(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<y-1?e.strstart:y-1,i===V?(U(e,!0),e.strm.avail_out===0?re:me):e.sym_next&&(U(e,!1),e.strm.avail_out===0)?L:ge},ga=(e,i)=>{let t,n,a,s,f=e.window;for(;;){if(e.lookahead<=J){if(pe(e),e.lookahead<=J&&i===Q)return L;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=y&&e.strstart>0&&(a=e.strstart-1,n=f[a],n===f[++a]&&n===f[++a]&&n===f[++a])){s=e.strstart+J;do;while(n===f[++a]&&n===f[++a]&&n===f[++a]&&n===f[++a]&&n===f[++a]&&n===f[++a]&&n===f[++a]&&n===f[++a]&&a<s);e.match_length=J-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=y?(t=j(e,1,e.match_length-y),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=j(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(U(e,!1),e.strm.avail_out===0))return L}return e.insert=0,i===V?(U(e,!0),e.strm.avail_out===0?re:me):e.sym_next&&(U(e,!1),e.strm.avail_out===0)?L:ge},ma=(e,i)=>{let t;for(;;){if(e.lookahead===0&&(pe(e),e.lookahead===0)){if(i===Q)return L;break}if(e.match_length=0,t=j(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(U(e,!1),e.strm.avail_out===0))return L}return e.insert=0,i===V?(U(e,!0),e.strm.avail_out===0?re:me):e.sym_next&&(U(e,!1),e.strm.avail_out===0)?L:ge};function O(e,i,t,n,a){this.good_length=e,this.max_lazy=i,this.nice_length=t,this.max_chain=n,this.func=a}var ye=[new O(0,0,0,0,Wi),new O(4,4,8,4,ft),new O(4,5,16,8,ft),new O(4,6,32,32,ft),new O(4,4,16,16,ue),new O(8,16,32,32,ue),new O(8,16,128,128,ue),new O(8,32,128,256,ue),new O(32,128,258,1024,ue),new O(32,258,258,4096,ue)],wa=e=>{e.window_size=2*e.w_size,q(e.head),e.max_lazy_match=ye[e.level].max_lazy,e.good_match=ye[e.level].good_length,e.nice_match=ye[e.level].nice_length,e.max_chain_length=ye[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=y-1,e.match_available=0,e.ins_h=0};function va(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=qe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ua*2),this.dyn_dtree=new Uint16Array((2*fa+1)*2),this.bl_tree=new Uint16Array((2*ha+1)*2),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(da+1),this.heap=new Uint16Array(2*kt+1),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*kt+1),q(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Le=e=>{if(!e)return 1;let i=e.state;return!i||i.strm!==e||i.status!==_e&&i.status!==It&&i.status!==yt&&i.status!==Ct&&i.status!==$t&&i.status!==Et&&i.status!==ne&&i.status!==ke?1:0},Ki=e=>{if(Le(e))return ae(e,W);e.total_in=e.total_out=0,e.data_type=na;let i=e.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap===2?It:i.wrap?_e:ne,e.adler=i.wrap===2?0:1,i.last_flush=-2,Kn(i),S},Bi=e=>{let i=Ki(e);return i===S&&wa(e.state),i},ka=(e,i)=>Le(e)||e.state.wrap!==2?W:(e.state.gzhead=i,S),Xi=(e,i,t,n,a,s)=>{if(!e)return W;let f=1;if(i===jn&&(i=6),n<0?(f=0,n=-n):n>15&&(f=2,n-=16),a<1||a>aa||t!==qe||n<8||n>15||i<0||i>9||s<0||s>ta||n===8&&f!==1)return ae(e,W);n===8&&(n=9);let l=new va;return e.state=l,l.strm=e,l.status=_e,l.wrap=f,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+y-1)/y),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=i,l.strategy=s,l.method=t,Bi(e)},ya=(e,i)=>Xi(e,i,qe,sa,ra,ia),Ca=(e,i)=>{if(Le(e)||i>qt||i<0)return e?ae(e,W):W;let t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===ke&&i!==V)return ae(e,e.avail_out===0?lt:W);let n=t.last_flush;if(t.last_flush=i,t.pending!==0){if(P(e),e.avail_out===0)return t.last_flush=-1,S}else if(e.avail_in===0&&jt(i)<=jt(n)&&i!==V)return ae(e,lt);if(t.status===ke&&e.avail_in!==0)return ae(e,lt);if(t.status===_e&&t.wrap===0&&(t.status=ne),t.status===_e){let a=qe+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=He||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,a|=s<<6,t.strstart!==0&&(a|=ca),a+=31-a%31,ve(t,a),t.strstart!==0&&(ve(t,e.adler>>>16),ve(t,e.adler&65535)),e.adler=1,t.status=ne,P(e),t.pending!==0)return t.last_flush=-1,S}if(t.status===It){if(e.adler=0,z(t,31),z(t,139),z(t,8),t.gzhead)z(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),z(t,t.gzhead.time&255),z(t,t.gzhead.time>>8&255),z(t,t.gzhead.time>>16&255),z(t,t.gzhead.time>>24&255),z(t,t.level===9?2:t.strategy>=He||t.level<2?4:0),z(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(z(t,t.gzhead.extra.length&255),z(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=R(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=yt;else if(z(t,0),z(t,0),z(t,0),z(t,0),z(t,0),z(t,t.level===9?2:t.strategy>=He||t.level<2?4:0),z(t,_a),t.status=ne,P(e),t.pending!==0)return t.last_flush=-1,S}if(t.status===yt){if(t.gzhead.extra){let a=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let l=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+l),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=R(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=l,P(e),t.pending!==0)return t.last_flush=-1,S;a=0,s-=l}let f=new Uint8Array(t.gzhead.extra);t.pending_buf.set(f.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>a&&(e.adler=R(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=Ct}if(t.status===Ct){if(t.gzhead.name){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=R(e.adler,t.pending_buf,t.pending-a,a)),P(e),t.pending!==0)return t.last_flush=-1,S;a=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,z(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=R(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=$t}if(t.status===$t){if(t.gzhead.comment){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=R(e.adler,t.pending_buf,t.pending-a,a)),P(e),t.pending!==0)return t.last_flush=-1,S;a=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,z(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=R(e.adler,t.pending_buf,t.pending-a,a))}t.status=Et}if(t.status===Et){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(P(e),t.pending!==0))return t.last_flush=-1,S;z(t,e.adler&255),z(t,e.adler>>8&255),e.adler=0}if(t.status=ne,P(e),t.pending!==0)return t.last_flush=-1,S}if(e.avail_in!==0||t.lookahead!==0||i!==Q&&t.status!==ke){let a=t.level===0?Wi(t,i):t.strategy===He?ma(t,i):t.strategy===ea?ga(t,i):ye[t.level].func(t,i);if((a===re||a===me)&&(t.status=ke),a===L||a===re)return e.avail_out===0&&(t.last_flush=-1),S;if(a===ge&&(i===Yn?Xn(t):i!==qt&&(vt(t,0,0,!1),i===qn&&(q(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),P(e),e.avail_out===0))return t.last_flush=-1,S}return i!==V?S:t.wrap<=0?Jt:(t.wrap===2?(z(t,e.adler&255),z(t,e.adler>>8&255),z(t,e.adler>>16&255),z(t,e.adler>>24&255),z(t,e.total_in&255),z(t,e.total_in>>8&255),z(t,e.total_in>>16&255),z(t,e.total_in>>24&255)):(ve(t,e.adler>>>16),ve(t,e.adler&65535)),P(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?S:Jt)},$a=e=>{if(Le(e))return W;let i=e.state.status;return e.state=null,i===ne?ae(e,Jn):S},Ea=(e,i)=>{let t=i.length;if(Le(e))return W;let n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==_e||n.lookahead)return W;if(a===1&&(e.adler=xe(e.adler,i,t,0)),n.wrap=0,t>=n.w_size){a===0&&(q(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(i.subarray(t-n.w_size,t),0),i=d,t=n.w_size}let s=e.avail_in,f=e.next_in,l=e.input;for(e.avail_in=t,e.next_in=0,e.input=i,pe(n);n.lookahead>=y;){let d=n.strstart,o=n.lookahead-(y-1);do n.ins_h=ee(n,n.ins_h,n.window[d+y-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--o);n.strstart=d,n.lookahead=y-1,pe(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=y-1,n.match_available=0,e.next_in=f,e.input=l,e.avail_in=s,n.wrap=a,S},za=ya,Na=Xi,Aa=Bi,Ta=Ki,xa=ka,Ia=Ca,Ra=$a,Sa=Ea,Da="pako deflate (from Nodeca project)",$e={deflateInit:za,deflateInit2:Na,deflateReset:Aa,deflateResetKeep:Ta,deflateSetHeader:xa,deflate:Ia,deflateEnd:Ra,deflateSetDictionary:Sa,deflateInfo:Da},La=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),Ma=function(e){let i=Array.prototype.slice.call(arguments,1);for(;i.length;){let t=i.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let n in t)La(t,n)&&(e[n]=t[n])}}return e},Pa=e=>{let i=0;for(let n=0,a=e.length;n<a;n++)i+=e[n].length;let t=new Uint8Array(i);for(let n=0,a=0,s=e.length;n<s;n++){let f=e[n];t.set(f,a),a+=f.length}return t},Je={assign:Ma,flattenChunks:Pa},Yi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Yi=!1}var Ie=new Uint8Array(256);for(let e=0;e<256;e++)Ie[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ie[254]=Ie[254]=1;var Ua=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let i,t,n,a,s,f=e.length,l=0;for(a=0;a<f;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<f&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(i=new Uint8Array(l),s=0,a=0;s<l;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<f&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),t<128?i[s++]=t:t<2048?(i[s++]=192|t>>>6,i[s++]=128|t&63):t<65536?(i[s++]=224|t>>>12,i[s++]=128|t>>>6&63,i[s++]=128|t&63):(i[s++]=240|t>>>18,i[s++]=128|t>>>12&63,i[s++]=128|t>>>6&63,i[s++]=128|t&63);return i},Va=(e,i)=>{if(i<65534&&e.subarray&&Yi)return String.fromCharCode.apply(null,e.length===i?e:e.subarray(0,i));let t="";for(let n=0;n<i;n++)t+=String.fromCharCode(e[n]);return t},Za=(e,i)=>{let t=i||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,i));let n,a,s=new Array(t*2);for(a=0,n=0;n<t;){let f=e[n++];if(f<128){s[a++]=f;continue}let l=Ie[f];if(l>4){s[a++]=65533,n+=l-1;continue}for(f&=l===2?31:l===3?15:7;l>1&&n<t;)f=f<<6|e[n++]&63,l--;if(l>1){s[a++]=65533;continue}f<65536?s[a++]=f:(f-=65536,s[a++]=55296|f>>10&1023,s[a++]=56320|f&1023)}return Va(s,a)},Ha=(e,i)=>{i=i||e.length,i>e.length&&(i=e.length);let t=i-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?i:t+Ie[e[t]]>i?t:i},Re={string2buf:Ua,buf2string:Za,utf8border:Ha};function Fa(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var qi=Fa,Ji=Object.prototype.toString,{Z_NO_FLUSH:Oa,Z_SYNC_FLUSH:Ga,Z_FULL_FLUSH:Wa,Z_FINISH:Ka,Z_OK:Xe,Z_STREAM_END:Ba,Z_DEFAULT_COMPRESSION:Xa,Z_DEFAULT_STRATEGY:Ya,Z_DEFLATED:qa}=le;function Me(e){this.options=Je.assign({level:Xa,method:qa,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ya},e||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qi,this.strm.avail_out=0;let t=$e.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(t!==Xe)throw new Error(se[t]);if(i.header&&$e.deflateSetHeader(this.strm,i.header),i.dictionary){let n;if(typeof i.dictionary=="string"?n=Re.string2buf(i.dictionary):Ji.call(i.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(i.dictionary):n=i.dictionary,t=$e.deflateSetDictionary(this.strm,n),t!==Xe)throw new Error(se[t]);this._dict_set=!0}}Me.prototype.push=function(e,i){let t=this.strm,n=this.options.chunkSize,a,s;if(this.ended)return!1;for(i===~~i?s=i:s=i===!0?Ka:Oa,typeof e=="string"?t.input=Re.string2buf(e):Ji.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(s===Ga||s===Wa)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(a=$e.deflate(t,s),a===Ba)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=$e.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Xe;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Me.prototype.onData=function(e){this.chunks.push(e)};Me.prototype.onEnd=function(e){e===Xe&&(this.result=Je.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Rt(e,i){let t=new Me(i);if(t.push(e,!0),t.err)throw t.msg||se[t.err];return t.result}function Ja(e,i){return i=i||{},i.raw=!0,Rt(e,i)}function ja(e,i){return i=i||{},i.gzip=!0,Rt(e,i)}var Qa=Me,es=Rt,ts=Ja,is=ja,ns=le,as={Deflate:Qa,deflate:es,deflateRaw:ts,gzip:is,constants:ns},Fe=16209,ss=16191,rs=function(i,t){let n,a,s,f,l,d,o,h,b,c,u,p,T,C,w,N,v,_,E,I,g,A,$,m,k=i.state;n=i.next_in,$=i.input,a=n+(i.avail_in-5),s=i.next_out,m=i.output,f=s-(t-i.avail_out),l=s+(i.avail_out-257),d=k.dmax,o=k.wsize,h=k.whave,b=k.wnext,c=k.window,u=k.hold,p=k.bits,T=k.lencode,C=k.distcode,w=(1<<k.lenbits)-1,N=(1<<k.distbits)-1;e:do{p<15&&(u+=$[n++]<<p,p+=8,u+=$[n++]<<p,p+=8),v=T[u&w];t:for(;;){if(_=v>>>24,u>>>=_,p-=_,_=v>>>16&255,_===0)m[s++]=v&65535;else if(_&16){E=v&65535,_&=15,_&&(p<_&&(u+=$[n++]<<p,p+=8),E+=u&(1<<_)-1,u>>>=_,p-=_),p<15&&(u+=$[n++]<<p,p+=8,u+=$[n++]<<p,p+=8),v=C[u&N];i:for(;;){if(_=v>>>24,u>>>=_,p-=_,_=v>>>16&255,_&16){if(I=v&65535,_&=15,p<_&&(u+=$[n++]<<p,p+=8,p<_&&(u+=$[n++]<<p,p+=8)),I+=u&(1<<_)-1,I>d){i.msg="invalid distance too far back",k.mode=Fe;break e}if(u>>>=_,p-=_,_=s-f,I>_){if(_=I-_,_>h&&k.sane){i.msg="invalid distance too far back",k.mode=Fe;break e}if(g=0,A=c,b===0){if(g+=o-_,_<E){E-=_;do m[s++]=c[g++];while(--_);g=s-I,A=m}}else if(b<_){if(g+=o+b-_,_-=b,_<E){E-=_;do m[s++]=c[g++];while(--_);if(g=0,b<E){_=b,E-=_;do m[s++]=c[g++];while(--_);g=s-I,A=m}}}else if(g+=b-_,_<E){E-=_;do m[s++]=c[g++];while(--_);g=s-I,A=m}for(;E>2;)m[s++]=A[g++],m[s++]=A[g++],m[s++]=A[g++],E-=3;E&&(m[s++]=A[g++],E>1&&(m[s++]=A[g++]))}else{g=s-I;do m[s++]=m[g++],m[s++]=m[g++],m[s++]=m[g++],E-=3;while(E>2);E&&(m[s++]=m[g++],E>1&&(m[s++]=m[g++]))}}else if((_&64)===0){v=C[(v&65535)+(u&(1<<_)-1)];continue i}else{i.msg="invalid distance code",k.mode=Fe;break e}break}}else if((_&64)===0){v=T[(v&65535)+(u&(1<<_)-1)];continue t}else if(_&32){k.mode=ss;break e}else{i.msg="invalid literal/length code",k.mode=Fe;break e}break}}while(n<a&&s<l);E=p>>3,n-=E,p-=E<<3,u&=(1<<p)-1,i.next_in=n,i.next_out=s,i.avail_in=n<a?5+(a-n):5-(n-a),i.avail_out=s<l?257+(l-s):257-(s-l),k.hold=u,k.bits=p},de=15,Qt=852,ei=592,ti=0,ht=1,ii=2,os=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ls=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fs=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),hs=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),us=(e,i,t,n,a,s,f,l)=>{let d=l.bits,o=0,h=0,b=0,c=0,u=0,p=0,T=0,C=0,w=0,N=0,v,_,E,I,g,A=null,$,m=new Uint16Array(de+1),k=new Uint16Array(de+1),te=null,Gt,Ve,Ze;for(o=0;o<=de;o++)m[o]=0;for(h=0;h<n;h++)m[i[t+h]]++;for(u=d,c=de;c>=1&&m[c]===0;c--);if(u>c&&(u=c),c===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(b=1;b<c&&m[b]===0;b++);for(u<b&&(u=b),C=1,o=1;o<=de;o++)if(C<<=1,C-=m[o],C<0)return-1;if(C>0&&(e===ti||c!==1))return-1;for(k[1]=0,o=1;o<de;o++)k[o+1]=k[o]+m[o];for(h=0;h<n;h++)i[t+h]!==0&&(f[k[i[t+h]]++]=h);if(e===ti?(A=te=f,$=20):e===ht?(A=os,te=ls,$=257):(A=fs,te=hs,$=0),N=0,h=0,o=b,g=s,p=u,T=0,E=-1,w=1<<u,I=w-1,e===ht&&w>Qt||e===ii&&w>ei)return 1;for(;;){Gt=o-T,f[h]+1<$?(Ve=0,Ze=f[h]):f[h]>=$?(Ve=te[f[h]-$],Ze=A[f[h]-$]):(Ve=96,Ze=0),v=1<<o-T,_=1<<p,b=_;do _-=v,a[g+(N>>T)+_]=Gt<<24|Ve<<16|Ze|0;while(_!==0);for(v=1<<o-1;N&v;)v>>=1;if(v!==0?(N&=v-1,N+=v):N=0,h++,--m[o]===0){if(o===c)break;o=i[t+f[h]]}if(o>u&&(N&I)!==E){for(T===0&&(T=u),g+=b,p=o-T,C=1<<p;p+T<c&&(C-=m[p+T],!(C<=0));)p++,C<<=1;if(w+=1<<p,e===ht&&w>Qt||e===ii&&w>ei)return 1;E=N&I,a[E]=u<<24|p<<16|g-s|0}}return N!==0&&(a[g+N]=o-T<<24|64<<16|0),l.bits=u,0},Ee=us,ds=0,ji=1,Qi=2,{Z_FINISH:ni,Z_BLOCK:cs,Z_TREES:Oe,Z_OK:oe,Z_STREAM_END:_s,Z_NEED_DICT:ps,Z_STREAM_ERROR:Z,Z_DATA_ERROR:en,Z_MEM_ERROR:tn,Z_BUF_ERROR:bs,Z_DEFLATED:ai}=le,je=16180,si=16181,ri=16182,oi=16183,li=16184,fi=16185,hi=16186,ui=16187,di=16188,ci=16189,Ye=16190,B=16191,ut=16192,_i=16193,dt=16194,pi=16195,bi=16196,gi=16197,mi=16198,Ge=16199,We=16200,wi=16201,vi=16202,ki=16203,yi=16204,Ci=16205,ct=16206,$i=16207,Ei=16208,x=16209,nn=16210,an=16211,gs=852,ms=592,ws=15,vs=ws,zi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function ks(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var fe=e=>{if(!e)return 1;let i=e.state;return!i||i.strm!==e||i.mode<je||i.mode>an?1:0},sn=e=>{if(fe(e))return Z;let i=e.state;return e.total_in=e.total_out=i.total=0,e.msg="",i.wrap&&(e.adler=i.wrap&1),i.mode=je,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(gs),i.distcode=i.distdyn=new Int32Array(ms),i.sane=1,i.back=-1,oe},rn=e=>{if(fe(e))return Z;let i=e.state;return i.wsize=0,i.whave=0,i.wnext=0,sn(e)},on=(e,i)=>{let t;if(fe(e))return Z;let n=e.state;return i<0?(t=0,i=-i):(t=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?Z:(n.window!==null&&n.wbits!==i&&(n.window=null),n.wrap=t,n.wbits=i,rn(e))},ln=(e,i)=>{if(!e)return Z;let t=new ks;e.state=t,t.strm=e,t.window=null,t.mode=je;let n=on(e,i);return n!==oe&&(e.state=null),n},ys=e=>ln(e,vs),Ni=!0,_t,pt,Cs=e=>{if(Ni){_t=new Int32Array(512),pt=new Int32Array(32);let i=0;for(;i<144;)e.lens[i++]=8;for(;i<256;)e.lens[i++]=9;for(;i<280;)e.lens[i++]=7;for(;i<288;)e.lens[i++]=8;for(Ee(ji,e.lens,0,288,_t,0,e.work,{bits:9}),i=0;i<32;)e.lens[i++]=5;Ee(Qi,e.lens,0,32,pt,0,e.work,{bits:5}),Ni=!1}e.lencode=_t,e.lenbits=9,e.distcode=pt,e.distbits=5},fn=(e,i,t,n)=>{let a,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(i.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(i.subarray(t-n,t-n+a),s.wnext),n-=a,n?(s.window.set(i.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},$s=(e,i)=>{let t,n,a,s,f,l,d,o,h,b,c,u,p,T,C=0,w,N,v,_,E,I,g,A,$=new Uint8Array(4),m,k,te=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(fe(e)||!e.output||!e.input&&e.avail_in!==0)return Z;t=e.state,t.mode===B&&(t.mode=ut),f=e.next_out,a=e.output,d=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,o=t.hold,h=t.bits,b=l,c=d,A=oe;e:for(;;)switch(t.mode){case je:if(t.wrap===0){t.mode=ut;break}for(;h<16;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if(t.wrap&2&&o===35615){t.wbits===0&&(t.wbits=15),t.check=0,$[0]=o&255,$[1]=o>>>8&255,t.check=R(t.check,$,2,0),o=0,h=0,t.mode=si;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((o&255)<<8)+(o>>8))%31){e.msg="incorrect header check",t.mode=x;break}if((o&15)!==ai){e.msg="unknown compression method",t.mode=x;break}if(o>>>=4,h-=4,g=(o&15)+8,t.wbits===0&&(t.wbits=g),g>15||g>t.wbits){e.msg="invalid window size",t.mode=x;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=o&512?ci:B,o=0,h=0;break;case si:for(;h<16;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if(t.flags=o,(t.flags&255)!==ai){e.msg="unknown compression method",t.mode=x;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=x;break}t.head&&(t.head.text=o>>8&1),t.flags&512&&t.wrap&4&&($[0]=o&255,$[1]=o>>>8&255,t.check=R(t.check,$,2,0)),o=0,h=0,t.mode=ri;case ri:for(;h<32;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}t.head&&(t.head.time=o),t.flags&512&&t.wrap&4&&($[0]=o&255,$[1]=o>>>8&255,$[2]=o>>>16&255,$[3]=o>>>24&255,t.check=R(t.check,$,4,0)),o=0,h=0,t.mode=oi;case oi:for(;h<16;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}t.head&&(t.head.xflags=o&255,t.head.os=o>>8),t.flags&512&&t.wrap&4&&($[0]=o&255,$[1]=o>>>8&255,t.check=R(t.check,$,2,0)),o=0,h=0,t.mode=li;case li:if(t.flags&1024){for(;h<16;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}t.length=o,t.head&&(t.head.extra_len=o),t.flags&512&&t.wrap&4&&($[0]=o&255,$[1]=o>>>8&255,t.check=R(t.check,$,2,0)),o=0,h=0}else t.head&&(t.head.extra=null);t.mode=fi;case fi:if(t.flags&1024&&(u=t.length,u>l&&(u=l),u&&(t.head&&(g=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+u),g)),t.flags&512&&t.wrap&4&&(t.check=R(t.check,n,u,s)),l-=u,s+=u,t.length-=u),t.length))break e;t.length=0,t.mode=hi;case hi:if(t.flags&2048){if(l===0)break e;u=0;do g=n[s+u++],t.head&&g&&t.length<65536&&(t.head.name+=String.fromCharCode(g));while(g&&u<l);if(t.flags&512&&t.wrap&4&&(t.check=R(t.check,n,u,s)),l-=u,s+=u,g)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=ui;case ui:if(t.flags&4096){if(l===0)break e;u=0;do g=n[s+u++],t.head&&g&&t.length<65536&&(t.head.comment+=String.fromCharCode(g));while(g&&u<l);if(t.flags&512&&t.wrap&4&&(t.check=R(t.check,n,u,s)),l-=u,s+=u,g)break e}else t.head&&(t.head.comment=null);t.mode=di;case di:if(t.flags&512){for(;h<16;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if(t.wrap&4&&o!==(t.check&65535)){e.msg="header crc mismatch",t.mode=x;break}o=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=B;break;case ci:for(;h<32;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}e.adler=t.check=zi(o),o=0,h=0,t.mode=Ye;case Ye:if(t.havedict===0)return e.next_out=f,e.avail_out=d,e.next_in=s,e.avail_in=l,t.hold=o,t.bits=h,ps;e.adler=t.check=1,t.mode=B;case B:if(i===cs||i===Oe)break e;case ut:if(t.last){o>>>=h&7,h-=h&7,t.mode=ct;break}for(;h<3;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}switch(t.last=o&1,o>>>=1,h-=1,o&3){case 0:t.mode=_i;break;case 1:if(Cs(t),t.mode=Ge,i===Oe){o>>>=2,h-=2;break e}break;case 2:t.mode=bi;break;case 3:e.msg="invalid block type",t.mode=x}o>>>=2,h-=2;break;case _i:for(o>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if((o&65535)!==(o>>>16^65535)){e.msg="invalid stored block lengths",t.mode=x;break}if(t.length=o&65535,o=0,h=0,t.mode=dt,i===Oe)break e;case dt:t.mode=pi;case pi:if(u=t.length,u){if(u>l&&(u=l),u>d&&(u=d),u===0)break e;a.set(n.subarray(s,s+u),f),l-=u,s+=u,d-=u,f+=u,t.length-=u;break}t.mode=B;break;case bi:for(;h<14;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if(t.nlen=(o&31)+257,o>>>=5,h-=5,t.ndist=(o&31)+1,o>>>=5,h-=5,t.ncode=(o&15)+4,o>>>=4,h-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=x;break}t.have=0,t.mode=gi;case gi:for(;t.have<t.ncode;){for(;h<3;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}t.lens[te[t.have++]]=o&7,o>>>=3,h-=3}for(;t.have<19;)t.lens[te[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,m={bits:t.lenbits},A=Ee(ds,t.lens,0,19,t.lencode,0,t.work,m),t.lenbits=m.bits,A){e.msg="invalid code lengths set",t.mode=x;break}t.have=0,t.mode=mi;case mi:for(;t.have<t.nlen+t.ndist;){for(;C=t.lencode[o&(1<<t.lenbits)-1],w=C>>>24,N=C>>>16&255,v=C&65535,!(w<=h);){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if(v<16)o>>>=w,h-=w,t.lens[t.have++]=v;else{if(v===16){for(k=w+2;h<k;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if(o>>>=w,h-=w,t.have===0){e.msg="invalid bit length repeat",t.mode=x;break}g=t.lens[t.have-1],u=3+(o&3),o>>>=2,h-=2}else if(v===17){for(k=w+3;h<k;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}o>>>=w,h-=w,g=0,u=3+(o&7),o>>>=3,h-=3}else{for(k=w+7;h<k;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}o>>>=w,h-=w,g=0,u=11+(o&127),o>>>=7,h-=7}if(t.have+u>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=x;break}for(;u--;)t.lens[t.have++]=g}}if(t.mode===x)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=x;break}if(t.lenbits=9,m={bits:t.lenbits},A=Ee(ji,t.lens,0,t.nlen,t.lencode,0,t.work,m),t.lenbits=m.bits,A){e.msg="invalid literal/lengths set",t.mode=x;break}if(t.distbits=6,t.distcode=t.distdyn,m={bits:t.distbits},A=Ee(Qi,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,m),t.distbits=m.bits,A){e.msg="invalid distances set",t.mode=x;break}if(t.mode=Ge,i===Oe)break e;case Ge:t.mode=We;case We:if(l>=6&&d>=258){e.next_out=f,e.avail_out=d,e.next_in=s,e.avail_in=l,t.hold=o,t.bits=h,rs(e,c),f=e.next_out,a=e.output,d=e.avail_out,s=e.next_in,n=e.input,l=e.avail_in,o=t.hold,h=t.bits,t.mode===B&&(t.back=-1);break}for(t.back=0;C=t.lencode[o&(1<<t.lenbits)-1],w=C>>>24,N=C>>>16&255,v=C&65535,!(w<=h);){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if(N&&(N&240)===0){for(_=w,E=N,I=v;C=t.lencode[I+((o&(1<<_+E)-1)>>_)],w=C>>>24,N=C>>>16&255,v=C&65535,!(_+w<=h);){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}o>>>=_,h-=_,t.back+=_}if(o>>>=w,h-=w,t.back+=w,t.length=v,N===0){t.mode=Ci;break}if(N&32){t.back=-1,t.mode=B;break}if(N&64){e.msg="invalid literal/length code",t.mode=x;break}t.extra=N&15,t.mode=wi;case wi:if(t.extra){for(k=t.extra;h<k;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}t.length+=o&(1<<t.extra)-1,o>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=vi;case vi:for(;C=t.distcode[o&(1<<t.distbits)-1],w=C>>>24,N=C>>>16&255,v=C&65535,!(w<=h);){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if((N&240)===0){for(_=w,E=N,I=v;C=t.distcode[I+((o&(1<<_+E)-1)>>_)],w=C>>>24,N=C>>>16&255,v=C&65535,!(_+w<=h);){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}o>>>=_,h-=_,t.back+=_}if(o>>>=w,h-=w,t.back+=w,N&64){e.msg="invalid distance code",t.mode=x;break}t.offset=v,t.extra=N&15,t.mode=ki;case ki:if(t.extra){for(k=t.extra;h<k;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}t.offset+=o&(1<<t.extra)-1,o>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=x;break}t.mode=yi;case yi:if(d===0)break e;if(u=c-d,t.offset>u){if(u=t.offset-u,u>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=x;break}u>t.wnext?(u-=t.wnext,p=t.wsize-u):p=t.wnext-u,u>t.length&&(u=t.length),T=t.window}else T=a,p=f-t.offset,u=t.length;u>d&&(u=d),d-=u,t.length-=u;do a[f++]=T[p++];while(--u);t.length===0&&(t.mode=We);break;case Ci:if(d===0)break e;a[f++]=t.length,d--,t.mode=We;break;case ct:if(t.wrap){for(;h<32;){if(l===0)break e;l--,o|=n[s++]<<h,h+=8}if(c-=d,e.total_out+=c,t.total+=c,t.wrap&4&&c&&(e.adler=t.check=t.flags?R(t.check,a,c,f-c):xe(t.check,a,c,f-c)),c=d,t.wrap&4&&(t.flags?o:zi(o))!==t.check){e.msg="incorrect data check",t.mode=x;break}o=0,h=0}t.mode=$i;case $i:if(t.wrap&&t.flags){for(;h<32;){if(l===0)break e;l--,o+=n[s++]<<h,h+=8}if(t.wrap&4&&o!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=x;break}o=0,h=0}t.mode=Ei;case Ei:A=_s;break e;case x:A=en;break e;case nn:return tn;case an:default:return Z}return e.next_out=f,e.avail_out=d,e.next_in=s,e.avail_in=l,t.hold=o,t.bits=h,(t.wsize||c!==e.avail_out&&t.mode<x&&(t.mode<ct||i!==ni))&&fn(e,e.output,e.next_out,c-e.avail_out),b-=e.avail_in,c-=e.avail_out,e.total_in+=b,e.total_out+=c,t.total+=c,t.wrap&4&&c&&(e.adler=t.check=t.flags?R(t.check,a,c,e.next_out-c):xe(t.check,a,c,e.next_out-c)),e.data_type=t.bits+(t.last?64:0)+(t.mode===B?128:0)+(t.mode===Ge||t.mode===dt?256:0),(b===0&&c===0||i===ni)&&A===oe&&(A=bs),A},Es=e=>{if(fe(e))return Z;let i=e.state;return i.window&&(i.window=null),e.state=null,oe},zs=(e,i)=>{if(fe(e))return Z;let t=e.state;return(t.wrap&2)===0?Z:(t.head=i,i.done=!1,oe)},Ns=(e,i)=>{let t=i.length,n,a,s;return fe(e)||(n=e.state,n.wrap!==0&&n.mode!==Ye)?Z:n.mode===Ye&&(a=1,a=xe(a,i,t,0),a!==n.check)?en:(s=fn(e,i,t,t),s?(n.mode=nn,tn):(n.havedict=1,oe))},As=rn,Ts=on,xs=sn,Is=ys,Rs=ln,Ss=$s,Ds=Es,Ls=zs,Ms=Ns,Ps="pako inflate (from Nodeca project)",Y={inflateReset:As,inflateReset2:Ts,inflateResetKeep:xs,inflateInit:Is,inflateInit2:Rs,inflate:Ss,inflateEnd:Ds,inflateGetHeader:Ls,inflateSetDictionary:Ms,inflateInfo:Ps};function Us(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Vs=Us,hn=Object.prototype.toString,{Z_NO_FLUSH:Zs,Z_FINISH:Hs,Z_OK:Se,Z_STREAM_END:bt,Z_NEED_DICT:gt,Z_STREAM_ERROR:Fs,Z_DATA_ERROR:Ai,Z_MEM_ERROR:Os}=le;function Pe(e){this.options=Je.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(e&&e.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15)===0&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qi,this.strm.avail_out=0;let t=Y.inflateInit2(this.strm,i.windowBits);if(t!==Se)throw new Error(se[t]);if(this.header=new Vs,Y.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=Re.string2buf(i.dictionary):hn.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(t=Y.inflateSetDictionary(this.strm,i.dictionary),t!==Se)))throw new Error(se[t])}Pe.prototype.push=function(e,i){let t=this.strm,n=this.options.chunkSize,a=this.options.dictionary,s,f,l;if(this.ended)return!1;for(i===~~i?f=i:f=i===!0?Hs:Zs,hn.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=Y.inflate(t,f),s===gt&&a&&(s=Y.inflateSetDictionary(t,a),s===Se?s=Y.inflate(t,f):s===Ai&&(s=gt));t.avail_in>0&&s===bt&&t.state.wrap>0&&e[t.next_in]!==0;)Y.inflateReset(t),s=Y.inflate(t,f);switch(s){case Fs:case Ai:case gt:case Os:return this.onEnd(s),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(t.avail_out===0||s===bt))if(this.options.to==="string"){let d=Re.utf8border(t.output,t.next_out),o=t.next_out-d,h=Re.buf2string(t.output,d);t.next_out=o,t.avail_out=n-o,o&&t.output.set(t.output.subarray(d,d+o),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Se&&l===0)){if(s===bt)return s=Y.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Pe.prototype.onData=function(e){this.chunks.push(e)};Pe.prototype.onEnd=function(e){e===Se&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Je.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function St(e,i){let t=new Pe(i);if(t.push(e),t.err)throw t.msg||se[t.err];return t.result}function Gs(e,i){return i=i||{},i.raw=!0,St(e,i)}var Ws=Pe,Ks=St,Bs=Gs,Xs=St,Ys=le,qs={Inflate:Ws,inflate:Ks,inflateRaw:Bs,ungzip:Xs,constants:Ys},{Deflate:Js,deflate:js,deflateRaw:Qs,gzip:er}=as,{Inflate:tr,inflate:ir,inflateRaw:nr,ungzip:ar}=qs,sr=Js,rr=js,or=Qs,lr=er,fr=tr,hr=ir,ur=nr,dr=ar,cr=le,un={Deflate:sr,deflate:rr,deflateRaw:or,gzip:lr,Inflate:fr,inflate:hr,inflateRaw:ur,ungzip:dr,constants:cr};var _r={"+":"N","-":"P",0:"x",1:"g",2:"0",3:"K",4:"8",5:"S",6:"J",7:"2",8:"s",9:"Z",A:"D",B:"F",C:"t",D:"T",E:"6",F:"E",G:"a",H:"V",I:"c",J:"p",K:"L",L:"M",M:"m",N:"e",O:"j",P:"9",Q:"X",R:"B",S:"4",T:"R",U:"Y",V:"7",W:"_",X:"n",Y:"O",Z:"b",a:"i",b:"-",c:"v",d:"H",e:"C",f:"A",g:"r",h:"W",i:"o",j:"d",k:"I",l:"q",m:"h",n:"U",o:"l",p:"k",q:"3",r:"f",s:"y",t:"5",u:"G",v:"w",w:"1",x:"u",y:"z",z:"Q"};function dn(e,i){let t="";for(let n of e)n in i?t+=i[n]:t+=n;return t}function Dt(e){return dn(e,_r)}function cn(e){return dn(e,{"-":"+",_:"/"})}function Lt(e){return e>="A"&&e<="Z"?e.charCodeAt(0)-65:e>="a"&&e<="z"?e.charCodeAt(0)-71:e>="0"&&e<="9"?e.charCodeAt(0)+4:e=="-"||e==">"?62:e=="_"||e=="?"?63:0}function _n(e){return e<26?String.fromCharCode(e+65):e<52?String.fromCharCode(e+71):e<62?String.fromCharCode(e-52+48):e==62?"-":"_"}function Mt(e,i){i?console.error(e):window.alert(e)}var Pt="[stgy:a",Ut="]";function Qe(e,i=!1){if(!e.startsWith(Pt)||!e.endsWith(Ut)||e.length<Pt.length+Ut.length+1)return Mt("Invalid strategy board.",i),null;let t=e.substring(Pt.length,e.length-Ut.length),n=Lt(Dt(t[0])),a=new ArrayBuffer(t.length-1),s=new Uint8Array(a);for(let l=0;l<t.length-1;l++){let d=t[l+1],o=Dt(d),b=Lt(o)-n-l&63;s[l]=_n(b).charCodeAt(0)}let f=new TextDecoder("windows-1252").decode(a);try{let l=Uint8Array.fromBase64(cn(f)),d=un.inflate(l.slice(6));if(!d)throw null;return d}catch{return Mt("Invalid strategy board.",i),null}}var Vt=(r=>(r[r.Tank=47]="Tank",r[r.Tank1=48]="Tank1",r[r.Tank2=49]="Tank2",r[r.Healer=50]="Healer",r[r.Healer1=51]="Healer1",r[r.Healer2=52]="Healer2",r[r.PureHealer=122]="PureHealer",r[r.BarrierHealer=123]="BarrierHealer",r[r.DPS=53]="DPS",r[r.DPS1=54]="DPS1",r[r.DPS2=55]="DPS2",r[r.DPS3=56]="DPS3",r[r.DPS4=57]="DPS4",r[r.MeleeDPS=118]="MeleeDPS",r[r.RangedDPS=119]="RangedDPS",r[r.PhysicalRangedDPS=120]="PhysicalRangedDPS",r[r.MagicalRangedDPS=121]="MagicalRangedDPS",r[r.PLD=27]="PLD",r[r.WAR=29]="WAR",r[r.DRK=38]="DRK",r[r.GNB=43]="GNB",r[r.WHM=32]="WHM",r[r.SCH=35]="SCH",r[r.AST=39]="AST",r[r.SGE=46]="SGE",r[r.MNK=28]="MNK",r[r.DRG=30]="DRG",r[r.NIN=36]="NIN",r[r.SAM=40]="SAM",r[r.RPR=45]="RPR",r[r.VPR=101]="VPR",r[r.BRD=31]="BRD",r[r.MCH=37]="MCH",r[r.DNC=44]="DNC",r[r.BLM=33]="BLM",r[r.SMN=34]="SMN",r[r.RDM=41]="RDM",r[r.PCT=102]="PCT",r[r.BLU=42]="BLU",r[r.GLD=18]="GLD",r[r.MRD=20]="MRD",r[r.CNJ=23]="CNJ",r[r.PGL=19]="PGL",r[r.LNC=21]="LNC",r[r.ROG=26]="ROG",r[r.ARC=22]="ARC",r[r.THM=24]="THM",r[r.ACN=25]="ACN",r[r.CircleAoE=9]="CircleAoE",r[r.FanAoE=10]="FanAoE",r[r.LineAoE=11]="LineAoE",r[r.Gaze=13]="Gaze",r[r.Stack=14]="Stack",r[r.LineStack=15]="LineStack",r[r.Proximity=16]="Proximity",r[r.Donut=17]="Donut",r[r.StackMulti=106]="StackMulti",r[r.ProximityPlayer=107]="ProximityPlayer",r[r.Tankbuster=108]="Tankbuster",r[r.RadialKnockback=109]="RadialKnockback",r[r.LinearKnockback=110]="LinearKnockback",r[r.Tower=111]="Tower",r[r.TargetingIndicator=112]="TargetingIndicator",r[r.MovingCircleAoE=126]="MovingCircleAoE",r[r.OnePersonAoE=127]="OnePersonAoE",r[r.TwoPersonAoE=128]="TwoPersonAoE",r[r.ThreePersonAoE=129]="ThreePersonAoE",r[r.FourPersonAoE=130]="FourPersonAoE",r[r.SmallEnemy=60]="SmallEnemy",r[r.MediumEnemy=62]="MediumEnemy",r[r.LargeEnemy=64]="LargeEnemy",r[r.Enhancement=113]="Enhancement",r[r.Enfeeblement=114]="Enfeeblement",r[r.Attack1=65]="Attack1",r[r.Attack2=66]="Attack2",r[r.Attack3=67]="Attack3",r[r.Attack4=68]="Attack4",r[r.Attack5=69]="Attack5",r[r.Attack6=115]="Attack6",r[r.Attack7=116]="Attack7",r[r.Attack8=117]="Attack8",r[r.Bind1=70]="Bind1",r[r.Bind2=71]="Bind2",r[r.Bind3=72]="Bind3",r[r.Ignore1=73]="Ignore1",r[r.Ignore2=74]="Ignore2",r[r.Square=75]="Square",r[r.Circle=76]="Circle",r[r.Plus=77]="Plus",r[r.Triangle=78]="Triangle",r[r.WaymarkA=79]="WaymarkA",r[r.WaymarkB=80]="WaymarkB",r[r.WaymarkC=81]="WaymarkC",r[r.WaymarkD=82]="WaymarkD",r[r.Waymark1=83]="Waymark1",r[r.Waymark2=84]="Waymark2",r[r.Waymark3=85]="Waymark3",r[r.Waymark4=86]="Waymark4",r[r.LockOnRed=131]="LockOnRed",r[r.LockOnBlue=132]="LockOnBlue",r[r.LockOnPurple=133]="LockOnPurple",r[r.LockOnGreen=134]="LockOnGreen",r[r.Text=100]="Text",r[r.SymbolCircle=87]="SymbolCircle",r[r.SymbolCross=88]="SymbolCross",r[r.SymbolTriangle=89]="SymbolTriangle",r[r.SymbolSquare=90]="SymbolSquare",r[r.UpArrow=94]="UpArrow",r[r.Rotate=103]="Rotate",r[r.HighlightedCircle=135]="HighlightedCircle",r[r.HighlightedCross=136]="HighlightedCross",r[r.HighlightedSquare=137]="HighlightedSquare",r[r.HighlightedTriangle=138]="HighlightedTriangle",r[r.RotateCW=139]="RotateCW",r[r.RotateCCW=140]="RotateCCW",r[r.Line=12]="Line",r[r.BGCheckeredCircle=4]="BGCheckeredCircle",r[r.BGCheckeredSquare=8]="BGCheckeredSquare",r[r.BGGrayCircle=124]="BGGrayCircle",r[r.BGGraySquare=125]="BGGraySquare",r))(Vt||{});var pn={47:{image:"assets/objects/tab1",size:128,offset:0},48:{image:"assets/objects/tab1",size:128,offset:128},49:{image:"assets/objects/tab1",size:128,offset:256},50:{image:"assets/objects/tab1",size:128,offset:384},51:{image:"assets/objects/tab1",size:128,offset:512},52:{image:"assets/objects/tab1",size:128,offset:640},122:{image:"assets/objects/tab1",size:128,offset:768},123:{image:"assets/objects/tab1",size:128,offset:896},53:{image:"assets/objects/tab1",size:128,offset:1024},54:{image:"assets/objects/tab1",size:128,offset:1152},55:{image:"assets/objects/tab1",size:128,offset:1280},56:{image:"assets/objects/tab1",size:128,offset:1408},57:{image:"assets/objects/tab1",size:128,offset:1536},118:{image:"assets/objects/tab1",size:128,offset:1664},119:{image:"assets/objects/tab1",size:128,offset:1792},120:{image:"assets/objects/tab1",size:128,offset:1920},121:{image:"assets/objects/tab1",size:128,offset:2048},27:{image:"assets/objects/tab1",size:128,offset:2176},29:{image:"assets/objects/tab1",size:128,offset:2304},38:{image:"assets/objects/tab1",size:128,offset:2432},43:{image:"assets/objects/tab1",size:128,offset:2560},32:{image:"assets/objects/tab1",size:128,offset:2688},35:{image:"assets/objects/tab1",size:128,offset:2816},39:{image:"assets/objects/tab1",size:128,offset:2944},46:{image:"assets/objects/tab1",size:128,offset:3072},28:{image:"assets/objects/tab1",size:128,offset:3200},30:{image:"assets/objects/tab1",size:128,offset:3328},36:{image:"assets/objects/tab1",size:128,offset:3456},40:{image:"assets/objects/tab1",size:128,offset:3584},45:{image:"assets/objects/tab1",size:128,offset:3712},101:{image:"assets/objects/tab1",size:128,offset:3840},31:{image:"assets/objects/tab1",size:128,offset:3968},37:{image:"assets/objects/tab1",size:128,offset:4096},44:{image:"assets/objects/tab1",size:128,offset:4224},33:{image:"assets/objects/tab1",size:128,offset:4352},34:{image:"assets/objects/tab1",size:128,offset:4480},41:{image:"assets/objects/tab1",size:128,offset:4608},102:{image:"assets/objects/tab1",size:128,offset:4736},42:{image:"assets/objects/tab1",size:128,offset:4864},18:{image:"assets/objects/tab1",size:128,offset:4992},20:{image:"assets/objects/tab1",size:128,offset:5120},23:{image:"assets/objects/tab1",size:128,offset:5248},19:{image:"assets/objects/tab1",size:128,offset:5376},21:{image:"assets/objects/tab1",size:128,offset:5504},26:{image:"assets/objects/tab1",size:128,offset:5632},22:{image:"assets/objects/tab1",size:128,offset:5760},24:{image:"assets/objects/tab1",size:128,offset:5888},25:{image:"assets/objects/tab1",size:128,offset:6016},9:{image:"assets/objects/circle_aoe",scale:.01},10:{special:!0},11:{special:!0},13:{image:"assets/objects/tab2",size:512,offset:0},14:{image:"assets/objects/tab2",size:512,offset:512},15:{image:"assets/objects/tab2",size:512,offset:1024},16:{image:"assets/objects/tab2",size:512,offset:1536,scale:.01},17:{special:!0},106:{image:"assets/objects/tab2",size:512,offset:2048},107:{image:"assets/objects/tab2",size:512,offset:2560},108:{image:"assets/objects/tab2",size:512,offset:3072,scale:.0025},109:{image:"assets/objects/tab2",size:512,offset:3584,scale:.01},110:{image:"assets/objects/tab2",size:512,offset:4096,scale:.01},111:{image:"assets/objects/tab2",size:512,offset:4608,scale:.0025},112:{image:"assets/objects/tab2",size:512,offset:5120,scale:.0025},126:{image:"assets/objects/tab2",size:512,offset:5632},127:{image:"assets/objects/tab2",size:512,offset:6144,scale:.0025},128:{image:"assets/objects/tab2",size:512,offset:6656,scale:.0025},129:{image:"assets/objects/tab2",size:512,offset:7168,scale:.0025},130:{image:"assets/objects/tab2",size:512,offset:7680,scale:.0025},60:{image:"assets/objects/tab3",size:128,offset:0,scale:.01},62:{image:"assets/objects/tab3",size:128,offset:128,scale:.01},64:{image:"assets/objects/tab3",size:128,offset:256,scale:.01},113:{image:"assets/objects/tab3",size:128,offset:384},114:{image:"assets/objects/tab3",size:128,offset:512},65:{image:"assets/objects/tab3",size:96,offset:640,scale:.006666666666666667},66:{image:"assets/objects/tab3",size:96,offset:736,scale:.006666666666666667},67:{image:"assets/objects/tab3",size:96,offset:832,scale:.006666666666666667},68:{image:"assets/objects/tab3",size:96,offset:928,scale:.006666666666666667},69:{image:"assets/objects/tab3",size:96,offset:1024,scale:.006666666666666667},115:{image:"assets/objects/tab3",size:96,offset:1120,scale:.006666666666666667},116:{image:"assets/objects/tab3",size:96,offset:1216,scale:.006666666666666667},117:{image:"assets/objects/tab3",size:96,offset:1312,scale:.006666666666666667},70:{image:"assets/objects/tab3",size:96,offset:1408,scale:.006666666666666667},71:{image:"assets/objects/tab3",size:96,offset:1504,scale:.006666666666666667},72:{image:"assets/objects/tab3",size:96,offset:1600,scale:.006666666666666667},73:{image:"assets/objects/tab3",size:96,offset:1696,scale:.006666666666666667},74:{image:"assets/objects/tab3",size:96,offset:1792,scale:.006666666666666667},75:{image:"assets/objects/tab3",size:96,offset:1888,scale:.006666666666666667},76:{image:"assets/objects/tab3",size:96,offset:1984,scale:.006666666666666667},77:{image:"assets/objects/tab3",size:96,offset:2080,scale:.006666666666666667},78:{image:"assets/objects/tab3",size:96,offset:2176,scale:.006666666666666667},79:{image:"assets/objects/tab3",size:96,offset:2272,scale:.01},80:{image:"assets/objects/tab3",size:96,offset:2368,scale:.01},81:{image:"assets/objects/tab3",size:96,offset:2464,scale:.01},82:{image:"assets/objects/tab3",size:96,offset:2560,scale:.01},83:{image:"assets/objects/tab3",size:96,offset:2656,scale:.01},84:{image:"assets/objects/tab3",size:96,offset:2752,scale:.01},85:{image:"assets/objects/tab3",size:96,offset:2848,scale:.01},86:{image:"assets/objects/tab3",size:96,offset:2944,scale:.01},131:{image:"assets/objects/tab3",size:96,offset:3040,scale:.01},132:{image:"assets/objects/tab3",size:96,offset:3136,scale:.01},133:{image:"assets/objects/tab3",size:96,offset:3232,scale:.01},134:{image:"assets/objects/tab3",size:96,offset:3328,scale:.01},100:{special:!0},87:{image:"assets/objects/tab4",size:96,offset:0,scale:.01},88:{image:"assets/objects/tab4",size:96,offset:96,scale:.01},89:{image:"assets/objects/tab4",size:96,offset:192,scale:.01},90:{image:"assets/objects/tab4",size:96,offset:288,scale:.01},94:{image:"assets/objects/tab4",size:96,offset:384,scale:.01},103:{image:"assets/objects/tab4",size:96,offset:480,scale:.01},135:{image:"assets/objects/tab4",size:96,offset:576,scale:.01},136:{image:"assets/objects/tab4",size:96,offset:672,scale:.01},137:{image:"assets/objects/tab4",size:96,offset:768,scale:.01},138:{image:"assets/objects/tab4",size:96,offset:864,scale:.01},139:{image:"assets/objects/tab4",size:96,offset:960,scale:.01},140:{image:"assets/objects/tab4",size:96,offset:1056,scale:.01},12:{special:!0},4:{image:"assets/objects/tab5",size:512,offset:0,scale:.01},8:{image:"assets/objects/tab5",size:512,offset:512,scale:.01},124:{image:"assets/objects/tab5",size:512,offset:1024,scale:.01},125:{image:"assets/objects/tab5",size:512,offset:1536,scale:.01}};var Zt=class{constructor(i,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=i,this.useContextVariables=t}generateVariable(i){let t=[...this.scopes[this.scopes.length-1]];return i&&t.push(i),t.join(".")}generateOption(i){switch(typeof i){case"number":return i.toString();case"string":return this.generateVariable(i);case"function":return`${this.addImport(i)}.call(${this.generateVariable()}, vars)`}}generateError(i){this.pushCode(`throw new Error(${i});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(i){this.code+=i+`
`}pushPath(i){i&&this.scopes[this.scopes.length-1].push(i)}popPath(i){i&&this.scopes[this.scopes.length-1].pop()}pushScope(i){this.scopes.push([i])}popScope(){this.scopes.pop()}addImport(i){if(!this.importPath)return`(${i})`;let t=this.reverseImports.get(i);return t||(t=this.imports.push(i)-1,this.reverseImports.set(i,t)),`${this.importPath}[${t}]`}addReference(i){this.references.has(i)||this.references.set(i,{resolved:!1,requested:!1})}markResolved(i){let t=this.references.get(i);t&&(t.resolved=!0)}markRequested(i){i.forEach(t=>{let n=this.references.get(t);n&&(n.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([i,t])=>!t.resolved&&!t.requested).map(([i,t])=>i)}},H=new Map,he="___parser_",F={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},et={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},tt={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},D=class e{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new e}sanitizeFieldName(i){if(i&&!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(i))throw new Error(`Invalid field name: ${i}`);return i}sanitizeEncoding(i){if(!["utf8","utf-8","ascii","hex","base64","base64url","latin1","binary"].includes(i.toLowerCase()))throw new Error(`Invalid encoding: ${i}`);return i}primitiveGenerateN(i,t){let n=et[i],a=tt[i];t.pushCode(`${t.generateVariable(this.varName)} = dataView.get${n}(offset, ${a});`),t.pushCode(`offset += ${F[i]};`)}primitiveN(i,t,n){return this.setNextParser(i,t,n)}useThisEndian(i){return i+this.endian.toLowerCase()}uint8(i,t={}){return this.primitiveN("uint8",i,t)}uint16(i,t={}){return this.primitiveN(this.useThisEndian("uint16"),i,t)}uint16le(i,t={}){return this.primitiveN("uint16le",i,t)}uint16be(i,t={}){return this.primitiveN("uint16be",i,t)}uint32(i,t={}){return this.primitiveN(this.useThisEndian("uint32"),i,t)}uint32le(i,t={}){return this.primitiveN("uint32le",i,t)}uint32be(i,t={}){return this.primitiveN("uint32be",i,t)}int8(i,t={}){return this.primitiveN("int8",i,t)}int16(i,t={}){return this.primitiveN(this.useThisEndian("int16"),i,t)}int16le(i,t={}){return this.primitiveN("int16le",i,t)}int16be(i,t={}){return this.primitiveN("int16be",i,t)}int32(i,t={}){return this.primitiveN(this.useThisEndian("int32"),i,t)}int32le(i,t={}){return this.primitiveN("int32le",i,t)}int32be(i,t={}){return this.primitiveN("int32be",i,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(i,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),i,t)}int64be(i,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",i,t)}int64le(i,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",i,t)}uint64(i,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),i,t)}uint64be(i,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",i,t)}uint64le(i,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",i,t)}floatle(i,t={}){return this.primitiveN("floatle",i,t)}floatbe(i,t={}){return this.primitiveN("floatbe",i,t)}doublele(i,t={}){return this.primitiveN("doublele",i,t)}doublebe(i,t={}){return this.primitiveN("doublebe",i,t)}bitN(i,t,n){return n.length=i,this.setNextParser("bit",t,n)}bit1(i,t={}){return this.bitN(1,i,t)}bit2(i,t={}){return this.bitN(2,i,t)}bit3(i,t={}){return this.bitN(3,i,t)}bit4(i,t={}){return this.bitN(4,i,t)}bit5(i,t={}){return this.bitN(5,i,t)}bit6(i,t={}){return this.bitN(6,i,t)}bit7(i,t={}){return this.bitN(7,i,t)}bit8(i,t={}){return this.bitN(8,i,t)}bit9(i,t={}){return this.bitN(9,i,t)}bit10(i,t={}){return this.bitN(10,i,t)}bit11(i,t={}){return this.bitN(11,i,t)}bit12(i,t={}){return this.bitN(12,i,t)}bit13(i,t={}){return this.bitN(13,i,t)}bit14(i,t={}){return this.bitN(14,i,t)}bit15(i,t={}){return this.bitN(15,i,t)}bit16(i,t={}){return this.bitN(16,i,t)}bit17(i,t={}){return this.bitN(17,i,t)}bit18(i,t={}){return this.bitN(18,i,t)}bit19(i,t={}){return this.bitN(19,i,t)}bit20(i,t={}){return this.bitN(20,i,t)}bit21(i,t={}){return this.bitN(21,i,t)}bit22(i,t={}){return this.bitN(22,i,t)}bit23(i,t={}){return this.bitN(23,i,t)}bit24(i,t={}){return this.bitN(24,i,t)}bit25(i,t={}){return this.bitN(25,i,t)}bit26(i,t={}){return this.bitN(26,i,t)}bit27(i,t={}){return this.bitN(27,i,t)}bit28(i,t={}){return this.bitN(28,i,t)}bit29(i,t={}){return this.bitN(29,i,t)}bit30(i,t={}){return this.bitN(30,i,t)}bit31(i,t={}){return this.bitN(31,i,t)}bit32(i,t={}){return this.bitN(32,i,t)}namely(i){return H.set(i,this),this.alias=i,this}skip(i,t={}){return this.seek(i,t)}seek(i,t={}){if(t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:i})}string(i,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!(t.length||t.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.sanitizeEncoding(t.encoding),this.setNextParser("string",i,t)}buffer(i,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",i,t)}wrapped(i,t){if(typeof t!="object"&&typeof i=="object"&&(t=i,i=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",i,t)}array(i,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if(typeof t.type=="string"&&!H.has(t.type)&&!(t.type in F))throw new Error(`Array element type "${t.type}" is unknown.`);return this.setNextParser("array",i,t)}choice(i,t){if(typeof t!="object"&&typeof i=="object"&&(t=i,i=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(let n in t.choices){let a=parseInt(n,10),s=t.choices[a];if(isNaN(a))throw new Error(`Choice key "${n}" is not a number.`);if(typeof s=="string"&&!H.has(s)&&!(s in F))throw new Error(`Choice type "${s}" is unknown.`)}return this.setNextParser("choice",i,t)}nest(i,t){if(typeof t!="object"&&typeof i=="object"&&(t=i,i=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof e)&&!H.has(t.type))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof e)&&!i)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",i,t)}pointer(i,t){if(t.offset==null)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if(typeof t.type=="string"&&!(t.type in F)&&!H.has(t.type))throw new Error(`Pointer type "${t.type}" is unknown.`);return this.setNextParser("pointer",i,t)}saveOffset(i,t={}){return this.setNextParser("saveOffset",i,t)}endianness(i){switch(i.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(i){return this.endianness(i)}useContextVars(i=!0){return this.useContextVariables=i,this}create(i){if(!(i instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=i,this}getContext(i){let t=new Zt(i,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode(`return ${he+this.alias}(0).result;`)):this.addRawCode(t),t}getCode(){return this.getContext("imports").code}addRawCode(i){i.pushCode("var offset = 0;"),i.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),i.pushCode("vars.$parent = null;"),i.pushCode("vars.$root = vars;"),this.generate(i),this.resolveReferences(i),i.pushCode("delete vars.$parent;"),i.pushCode("delete vars.$root;"),i.pushCode("return vars;")}addAliasedCode(i){return i.pushCode(`function ${he+this.alias}(offset, context) {`),i.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),i.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),i.pushCode("vars = Object.assign(vars, ctx);"),this.generate(i),i.markResolved(this.alias),this.resolveReferences(i),i.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),i.pushCode("return { offset: offset, result: vars };"),i.pushCode("}"),i}resolveReferences(i){let t=i.getUnresolvedReferences();i.markRequested(t),t.forEach(n=>{var a;(a=H.get(n))===null||a===void 0||a.addAliasedCode(i)})}compile(){let i="imports",t=this.getContext(i);this.compiled=new Function(i,"TextDecoder",`return function (buffer, constructorFn) { ${t.code} };`)(t.imports,TextDecoder)}sizeOf(){let i=NaN;if(Object.keys(F).indexOf(this.type)>=0)i=F[this.type];else if(this.type==="string"&&typeof this.options.length=="number")i=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")i=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let t=NaN;typeof this.options.type=="string"?t=F[this.options.type]:this.options.type instanceof e&&(t=this.options.type.sizeOf()),i=this.options.length*t}else this.type==="seek"?i=this.options.length:this.type==="nest"?i=this.options.type.sizeOf():this.type||(i=0);return this.next&&(i+=this.next.sizeOf()),i}parse(i){return this.compiled||this.compile(),this.compiled(i,this.constructorFn)}setNextParser(i,t,n){let a=new e;return a.type=i,a.varName=this.sanitizeFieldName(t),a.options=n,a.endian=this.endian,this.head?this.head.next=a:this.next=a,this.head=a,this}generate(i){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,i);break;case"bit":this.generateBit(i);break;case"string":this.generateString(i);break;case"buffer":this.generateBuffer(i);break;case"seek":this.generateSeek(i);break;case"nest":this.generateNest(i);break;case"array":this.generateArray(i);break;case"choice":this.generateChoice(i);break;case"pointer":this.generatePointer(i);break;case"saveOffset":this.generateSaveOffset(i);break;case"wrapper":this.generateWrapper(i);break}this.type!=="bit"&&this.generateAssert(i)}let t=i.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(i,t,this.options.formatter),this.generateNext(i)}generateAssert(i){if(!this.options.assert)return;let t=i.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{let n=i.addImport(this.options.assert);i.pushCode(`if (!${n}.call(vars, ${t})) {`)}break;case"number":i.pushCode(`if (${this.options.assert} !== ${t}) {`);break;case"string":i.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${t}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}i.generateError(`"Assertion error: ${t} is " + ${JSON.stringify(this.options.assert.toString())}`),i.pushCode("}")}generateNext(i){return this.next&&(i=this.next.generate(i)),i}nextNotBit(){return this.next?this.next.type==="nest"?this.next.options&&this.next.options.type instanceof e?this.next.options.type.next?this.next.options.type.next.type!=="bit":!1:!0:this.next.type!=="bit":!0}generateBit(i){let t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=i.generateVariable(t.varName),i.bitFields.push(t),!this.next||this.nextNotBit()){let n=i.generateTmpVariable();i.pushCode(`var ${n} = 0;`);let a=(h=0)=>{let b=0;for(let c=h;c<i.bitFields.length;c++){let u=i.bitFields[c].options.length;if(b+u>32)break;b+=u}return b},s=h=>(h<=8?(i.pushCode(`${n} = dataView.getUint8(offset);`),h=8):h<=16?(i.pushCode(`${n} = dataView.getUint16(offset);`),h=16):h<=24?(i.pushCode(`${n} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),h=24):(i.pushCode(`${n} = dataView.getUint32(offset);`),h=32),i.pushCode(`offset += ${h/8};`),h),f=0,l=this.endian==="be",d=0,o=0;i.bitFields.forEach((h,b)=>{let c=h.options.length;if(c>o){if(o){let T=-1>>>32-o;i.pushCode(`${h.varName} = (${n} & 0x${T.toString(16)}) << ${c-o};`),c-=o}f=0,o=d=s(a(b)-o)}let u=l?d-f-c:f,p=-1>>>32-c;i.pushCode(`${h.varName} ${c<h.options.length?"|=":"="} ${n} >> ${u} & 0x${p.toString(16)};`),h.options.length===32&&i.pushCode(`${h.varName} >>>= 0`),h.options.assert&&h.generateAssert(i),h.options.formatter&&h.generateFormatter(i,h.varName,h.options.formatter),f+=c,o-=c}),i.bitFields=[]}}generateSeek(i){let t=i.generateOption(this.options.length);i.pushCode(`offset += ${t};`)}generateString(i){let t=i.generateVariable(this.varName),n=i.generateTmpVariable(),a=this.options.encoding,s=a.toLowerCase()==="hex",f='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){let l=this.options.length;i.pushCode(`var ${n} = offset;`),i.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${n} < ${l});`);let d=`offset - ${n} < ${l} ? offset - 1 : offset`;i.pushCode(s?`${t} = Array.from(buffer.subarray(${n}, ${d}), ${f}).join('');`:`${t} = new TextDecoder('${a}').decode(buffer.subarray(${n}, ${d}));`)}else if(this.options.length){let l=i.generateOption(this.options.length);i.pushCode(s?`${t} = Array.from(buffer.subarray(offset, offset + ${l}), ${f}).join('');`:`${t} = new TextDecoder('${a}').decode(buffer.subarray(offset, offset + ${l}));`),i.pushCode(`offset += ${l};`)}else this.options.zeroTerminated?(i.pushCode(`var ${n} = offset;`),i.pushCode("while(dataView.getUint8(offset++) !== 0);"),i.pushCode(s?`${t} = Array.from(buffer.subarray(${n}, offset - 1), ${f}).join('');`:`${t} = new TextDecoder('${a}').decode(buffer.subarray(${n}, offset - 1));`)):this.options.greedy&&(i.pushCode(`var ${n} = offset;`),i.pushCode("while(buffer.length > offset++);"),i.pushCode(s?`${t} = Array.from(buffer.subarray(${n}, offset), ${f}).join('');`:`${t} = new TextDecoder('${a}').decode(buffer.subarray(${n}, offset));`));this.options.stripNull&&i.pushCode(`${t} = ${t}.replace(/\\x00+$/g, '')`)}generateBuffer(i){let t=i.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){let n=this.options.readUntil,a=i.generateTmpVariable(),s=i.generateTmpVariable();i.pushCode(`var ${a} = offset;`),i.pushCode(`var ${s} = 0;`),i.pushCode("while (offset < buffer.length) {"),i.pushCode(`${s} = dataView.getUint8(offset);`);let f=i.addImport(n);i.pushCode(`if (${f}.call(${i.generateVariable()}, ${s}, buffer.subarray(offset))) break;`),i.pushCode("offset += 1;"),i.pushCode("}"),i.pushCode(`${t} = buffer.subarray(${a}, offset);`)}else if(this.options.readUntil==="eof")i.pushCode(`${t} = buffer.subarray(offset);`);else{let n=i.generateOption(this.options.length);i.pushCode(`${t} = buffer.subarray(offset, offset + ${n});`),i.pushCode(`offset += ${n};`)}this.options.clone&&i.pushCode(`${t} = buffer.constructor.from(${t});`)}generateArray(i){let t=i.generateOption(this.options.length),n=i.generateOption(this.options.lengthInBytes),a=this.options.type,s=i.generateTmpVariable(),f=i.generateVariable(this.varName),l=i.generateTmpVariable(),d=this.options.key,o=typeof d=="string";if(o?i.pushCode(`${f} = {};`):i.pushCode(`${f} = [];`),typeof this.options.readUntil=="function"?i.pushCode("do {"):this.options.readUntil==="eof"?i.pushCode(`for (var ${s} = 0; offset < buffer.length; ${s}++) {`):n!==void 0?i.pushCode(`for (var ${s} = offset + ${n}; offset < ${s}; ) {`):i.pushCode(`for (var ${s} = ${t}; ${s} > 0; ${s}--) {`),typeof a=="string")if(H.get(a)){let h=i.generateTmpVariable();if(i.pushCode(`var ${h} = ${he+a}(offset, {`),i.useContextVariables){let b=i.generateVariable();i.pushCode(`$parent: ${b},`),i.pushCode(`$root: ${b}.$root,`),!this.options.readUntil&&n===void 0&&i.pushCode(`$index: ${t} - ${s},`)}i.pushCode("});"),i.pushCode(`var ${l} = ${h}.result; offset = ${h}.offset;`),a!==this.alias&&i.addReference(a)}else{let h=et[a],b=tt[a];i.pushCode(`var ${l} = dataView.get${h}(offset, ${b});`),i.pushCode(`offset += ${F[a]};`)}else if(a instanceof e){i.pushCode(`var ${l} = {};`);let h=i.generateVariable();i.pushScope(l),i.useContextVariables&&(i.pushCode(`${l}.$parent = ${h};`),i.pushCode(`${l}.$root = ${h}.$root;`),!this.options.readUntil&&n===void 0&&i.pushCode(`${l}.$index = ${t} - ${s};`)),a.generate(i),i.useContextVariables&&(i.pushCode(`delete ${l}.$parent;`),i.pushCode(`delete ${l}.$root;`),i.pushCode(`delete ${l}.$index;`)),i.popScope()}if(o?i.pushCode(`${f}[${l}.${d}] = ${l};`):i.pushCode(`${f}.push(${l});`),i.pushCode("}"),typeof this.options.readUntil=="function"){let h=this.options.readUntil,b=i.addImport(h);i.pushCode(`while (!${b}.call(${i.generateVariable()}, ${l}, buffer.subarray(offset)));`)}}generateChoiceCase(i,t,n){if(typeof n=="string"){let a=i.generateVariable(this.varName);if(H.has(n)){let s=i.generateTmpVariable();i.pushCode(`var ${s} = ${he+n}(offset, {`),i.useContextVariables&&(i.pushCode(`$parent: ${a}.$parent,`),i.pushCode(`$root: ${a}.$root,`)),i.pushCode("});"),i.pushCode(`${a} = ${s}.result; offset = ${s}.offset;`),n!==this.alias&&i.addReference(n)}else{let s=et[n],f=tt[n];i.pushCode(`${a} = dataView.get${s}(offset, ${f});`),i.pushCode(`offset += ${F[n]}`)}}else n instanceof e&&(i.pushPath(t),n.generate(i),i.popPath(t))}generateChoice(i){let t=i.generateOption(this.options.tag),n=i.generateVariable(this.varName);if(this.varName&&(i.pushCode(`${n} = {};`),i.useContextVariables)){let a=i.generateVariable();i.pushCode(`${n}.$parent = ${a};`),i.pushCode(`${n}.$root = ${a}.$root;`)}i.pushCode(`switch(${t}) {`);for(let a in this.options.choices){let s=parseInt(a,10),f=this.options.choices[s];i.pushCode(`case ${s}:`),this.generateChoiceCase(i,this.varName,f),i.pushCode("break;")}i.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(i,this.varName,this.options.defaultChoice):i.generateError(`"Met undefined tag value " + ${t} + " at choice"`),i.pushCode("}"),this.varName&&i.useContextVariables&&(i.pushCode(`delete ${n}.$parent;`),i.pushCode(`delete ${n}.$root;`))}generateNest(i){let t=i.generateVariable(this.varName);if(this.options.type instanceof e){if(this.varName&&(i.pushCode(`${t} = {};`),i.useContextVariables)){let n=i.generateVariable();i.pushCode(`${t}.$parent = ${n};`),i.pushCode(`${t}.$root = ${n}.$root;`)}i.pushPath(this.varName),this.options.type.generate(i),i.popPath(this.varName),this.varName&&i.useContextVariables&&i.useContextVariables&&(i.pushCode(`delete ${t}.$parent;`),i.pushCode(`delete ${t}.$root;`))}else if(H.has(this.options.type)){let n=i.generateTmpVariable();if(i.pushCode(`var ${n} = ${he+this.options.type}(offset, {`),i.useContextVariables){let a=i.generateVariable();i.pushCode(`$parent: ${a},`),i.pushCode(`$root: ${a}.$root,`)}i.pushCode("});"),i.pushCode(`${t} = ${n}.result; offset = ${n}.offset;`),this.options.type!==this.alias&&i.addReference(this.options.type)}}generateWrapper(i){let t=i.generateVariable(this.varName),n=i.generateTmpVariable();if(typeof this.options.readUntil=="function"){let d=this.options.readUntil,o=i.generateTmpVariable(),h=i.generateTmpVariable();i.pushCode(`var ${o} = offset;`),i.pushCode(`var ${h} = 0;`),i.pushCode("while (offset < buffer.length) {"),i.pushCode(`${h} = dataView.getUint8(offset);`);let b=i.addImport(d);i.pushCode(`if (${b}.call(${i.generateVariable()}, ${h}, buffer.subarray(offset))) break;`),i.pushCode("offset += 1;"),i.pushCode("}"),i.pushCode(`${n} = buffer.subarray(${o}, offset);`)}else if(this.options.readUntil==="eof")i.pushCode(`${n} = buffer.subarray(offset);`);else{let d=i.generateOption(this.options.length);i.pushCode(`${n} = buffer.subarray(offset, offset + ${d});`),i.pushCode(`offset += ${d};`)}this.options.clone&&i.pushCode(`${n} = buffer.constructor.from(${n});`);let a=i.generateTmpVariable(),s=i.generateTmpVariable(),f=i.generateTmpVariable(),l=i.addImport(this.options.wrapper);if(i.pushCode(`${n} = ${l}.call(this, ${n}).subarray(0);`),i.pushCode(`var ${a} = buffer;`),i.pushCode(`var ${s} = offset;`),i.pushCode(`var ${f} = dataView;`),i.pushCode(`buffer = ${n};`),i.pushCode("offset = 0;"),i.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof e)this.varName&&i.pushCode(`${t} = {};`),i.pushPath(this.varName),this.options.type.generate(i),i.popPath(this.varName);else if(H.has(this.options.type)){let d=i.generateTmpVariable();i.pushCode(`var ${d} = ${he+this.options.type}(0);`),i.pushCode(`${t} = ${d}.result;`),this.options.type!==this.alias&&i.addReference(this.options.type)}i.pushCode(`buffer = ${a};`),i.pushCode(`dataView = ${f};`),i.pushCode(`offset = ${s};`)}generateFormatter(i,t,n){if(typeof n=="function"){let a=i.addImport(n);i.pushCode(`${t} = ${a}.call(${i.generateVariable()}, ${t});`)}}generatePointer(i){let t=this.options.type,n=i.generateOption(this.options.offset),a=i.generateTmpVariable(),s=i.generateVariable(this.varName);if(i.pushCode(`var ${a} = offset;`),i.pushCode(`offset = ${n};`),this.options.type instanceof e){if(i.pushCode(`${s} = {};`),i.useContextVariables){let f=i.generateVariable();i.pushCode(`${s}.$parent = ${f};`),i.pushCode(`${s}.$root = ${f}.$root;`)}i.pushPath(this.varName),this.options.type.generate(i),i.popPath(this.varName),i.useContextVariables&&(i.pushCode(`delete ${s}.$parent;`),i.pushCode(`delete ${s}.$root;`))}else if(H.has(this.options.type)){let f=i.generateTmpVariable();if(i.pushCode(`var ${f} = ${he+this.options.type}(offset, {`),i.useContextVariables){let l=i.generateVariable();i.pushCode(`$parent: ${l},`),i.pushCode(`$root: ${l}.$root,`)}i.pushCode("});"),i.pushCode(`${s} = ${f}.result; offset = ${f}.offset;`),this.options.type!==this.alias&&i.addReference(this.options.type)}else if(Object.keys(F).indexOf(this.options.type)>=0){let f=et[t],l=tt[t];i.pushCode(`${s} = dataView.get${f}(offset, ${l});`),i.pushCode(`offset += ${F[t]};`)}i.pushCode(`offset = ${a};`)}generateSaveOffset(i){let t=i.generateVariable(this.varName);i.pushCode(`${t} = offset`)}};var pr=new D,br=new D().endianness("little").uint16("unk",{assert:3}).uint16("length").string("string",{length:"length",stripNull:!0}),gr=new D().endianness("little").uint16("magic",{assert:2}).uint16("id").choice({tag:"id",defaultChoice:pr,choices:{100:br}}),mr=new D().endianness("little").array("objects",{type:gr,readUntil:"eof"}),wr=new D().endianness("little").bit8("unused1").bit1("visible").bit1("flip_horizontal").bit1("flip_vertical").bit1("locked").bit4("unused2"),vr=new D().endianness("little").uint16("section_id",{assert:4}).uint16("unk").uint16("length").array("values",{type:wr,length:"length"}),kr=new D().endianness("little").uint16("x").uint16("y"),yr=new D().endianness("little").uint16("section_id",{assert:5}).uint16("unk").uint16("length").array("values",{type:kr,length:"length"}),Cr=new D().endianness("little").uint16("section_id",{assert:6}).uint16("unk").uint16("length").array("values",{type:"int16le",length:"length"}),$r=new D().endianness("little").uint16("section_id",{assert:7}).uint16("unk").uint16("length").array("values",{type:"uint8",length:function(){return Math.ceil(this.length/2)*2}}),Er=new D().endianness("little").uint8("red").uint8("green").uint8("blue").uint8("transparency"),zr=new D().endianness("little").uint16("section_id",{assert:8}).uint16("unk").uint16("length").array("values",{type:Er,length:"length"}),Ht=new D().endianness("little").uint16("section_id").uint16("unk").uint16("length").array("values",{type:"uint16le",length:"length"}),Nr=new D().endianness("little").uint32("header_magic").uint16("length1").uint32("header_unk1").uint32("header_unk2").uint32("header_unk3").uint16("length2").uint32("header_unk4").uint16("section_id",{assert:1}).uint16("board_name_length").string("board_name",{length:"board_name_length",stripNull:!0}).wrapped({wrapper:e=>e,type:mr,readUntil:function(e){if(!this.___remainingBytes||this.___remainingBytes===0)if(this.___prepareStringRead)this.___remainingBytes=e+2,this.___prepareStringRead=!1,this.___readingString=!0;else if(e===2)this.___remainingBytes=4;else return!0;return console.log("header_magic:",this.header_magic),!this.___prepareStringRead&&!this.___readingString&&e===100&&this.___remainingBytes==2&&(this.___prepareStringRead=!0,this.___remainingBytes=4),this.___remainingBytes>0&&(this.___remainingBytes--,this.___readingString&&this.___remainingBytes===0&&(this.___readingString=!1)),!1}}).nest("object_flags",{type:vr}).nest("coordinates",{type:yr}).nest("angles",{type:Cr}).nest("scales",{type:$r}).nest("colors",{type:zr}).nest("params1",{type:Ht}).nest("params2",{type:Ht}).nest("params3",{type:Ht}).uint16("footer_magic",{assert:3}).uint16("footer_unk1").uint16("footer_unk2").uint16("background");function bn(e){let i=Nr.parse(e),t=[];for(let n=0;n<i.objects.length;n++){let a={visible:i.object_flags.values[n].visible===1,flipHorizontal:i.object_flags.values[n].flip_horizontal===1,flipVertical:i.object_flags.values[n].flip_vertical===1},s={x:Math.round(i.coordinates.values[n].x/5120*1024),y:Math.round(i.coordinates.values[n].y/3840*768)},f={red:i.colors.values[n].red,green:i.colors.values[n].green,blue:i.colors.values[n].blue,alpha:1-i.colors.values[n].transparency/100};t.push({id:i.objects[n].id,string:i.objects[n].string,flags:a,coordinates:s,angle:i.angles.values[n]/180*Math.PI,scale:i.scales.values[n],color:f,param1:i.params1.values[n],param2:i.params2.values[n],param3:i.params3.values[n]})}return{objects:t.reverse(),background:i.background}}function we(e){return window.stgyImageCache||(window.stgyImageCache={}),new Promise((i,t)=>{let n;if(typeof e=="string")n=e;else{if(e.special||!e.image){t();return}n=e.image}if(n in window.stgyImageCache){i(window.stgyImageCache[n]);return}let a=new Image;a.onload=()=>{window.stgyImageCache[n]=a,i(a)},a.onerror=t,a.src=n+".webp"})}function Ue(){return document.getElementById("canvas").getContext("2d")}function gn(e,i,t=1,n=1){let a=document.createElement("canvas");a.width=i.size*t,a.height=i.size*n;let s=a.getContext("2d");for(let f=0;f<n;f++)for(let l=0;l<t;l++)s.drawImage(e,i.offset,0,i.size,i.size,l*i.size,f*i.size,i.size,i.size);return a}function Tr(e,i,t,n){let a=i,s=i,f=-Math.PI/2,l=f+t,d=document.createElement("canvas");d.width=i*2,d.height=i*2;let o=d.getContext("2d");o.arc(a,s,i,f,l,!1),o.lineTo(a+e*Math.cos(l),s+e*Math.sin(l)),o.arc(a,s,e,l,f,!0),o.lineTo(a+i*Math.cos(f),s+i*Math.sin(f)),n?(console.log(n),o.clip(),o.drawImage(n,0,0,i*2,i*2)):(o.fillStyle="rgb(255 144 0 / 0.75)",o.closePath(),o.fill());let h=0,b=0,c=0;t<Math.PI*1.5&&t>=Math.PI?h=(1+Math.sin(t))*i:t<Math.PI&&(h=i),t<Math.PI&&(t>=Math.PI*.5?c=(1+Math.cos(t))*i:c=i+Math.cos(t)*e),t<Math.PI*.5&&(b=(1-Math.sin(t))*i);let u=document.createElement("canvas");return u.width=i*2-h-b,u.height=i*2-c,u.getContext("2d").drawImage(d,-h,0),u}function it(e,i,t,n,a=0,s=1,f=1,l=!1,d=!1){let o=Ue();o.save(),o.translate(t,n),o.rotate(a),o.scale(s*(l?-1:1),s*(d?-1:1)),o.globalAlpha=f,!(e instanceof HTMLCanvasElement)&&i.image&&i.offset!==void 0&&i.size?o.drawImage(e,i.offset,0,i.size,i.size,-i.size/2,-i.size/2,i.size,i.size):o.drawImage(e,-e.width/2,-e.height/2),o.restore()}function xr(e){let i=Math.round(e.param1/5120*1024),t=Math.round(e.param2/3840*768),n=Ue();n.save(),n.lineCap="round",n.lineWidth=e.param3*2,n.strokeStyle=`rgb(${e.color.red} ${e.color.green} ${e.color.blue} / ${e.color.alpha})`,n.beginPath(),n.moveTo(e.coordinates.x,e.coordinates.y),n.lineTo(i,t),n.stroke(),n.restore()}function Ir(e){let i=e.param1*2,t=e.param2*2,n=Ue();n.save(),n.fillStyle=`rgb(${e.color.red} ${e.color.green} ${e.color.blue} / ${e.color.alpha})`,n.translate(e.coordinates.x,e.coordinates.y),n.rotate(e.angle),n.fillRect(-i/2,-t/2,i,t),n.restore()}function mn(e,i=null){let t=e.param1/180*Math.PI,n=e.id===10?0:e.param2,a=e.id===10?256:250;it(Tr(n,a,t,i),{},e.coordinates.x,e.coordinates.y,e.angle,e.scale/50,1,e.flags.flipHorizontal,e.flags.flipVertical)}function Rr(e){let i=e.string;if(!i){console.error("Text object has no string.");return}let t=Ue();t.save(),t.font="30px sans-serif",t.textAlign="center",t.textBaseline="middle",t.lineWidth=1.5,t.shadowBlur=3,t.shadowColor="black",t.fillStyle=`rgb(${e.color.red} ${e.color.green} ${e.color.blue})`,t.strokeStyle="rgb(0 0 0)",t.strokeText(i,e.coordinates.x,e.coordinates.y),t.fillText(i,e.coordinates.x,e.coordinates.y),t.restore()}async function Sr(e){if(!(e.id in Vt)){console.error(`Unknown object ID ${e.id}.`);return}if(!e.flags.visible)return;let i=pn[e.id],t=e.scale*(i.scale??.005),n;switch(e.id){case 11:Ir(e);break;case 12:xr(e);break;case 15:n=await we(i),it(gn(n,i,1,e.param2),i,e.coordinates.x,e.coordinates.y,e.angle,t,e.color.alpha,e.flags.flipHorizontal,e.flags.flipVertical);break;case 10:n=await we("assets/objects/circle_aoe"),mn(e,n);break;case 17:mn(e);break;case 100:Rr(e);break;case 110:n=await we(i),it(gn(n,i,e.param1,e.param2),i,e.coordinates.x,e.coordinates.y,e.angle,t,e.color.alpha,e.flags.flipHorizontal,e.flags.flipVertical);break;default:n=await we(i),it(n,i,e.coordinates.x,e.coordinates.y,e.angle,t,e.color.alpha);break}}async function nt(e){let i=bn(e),t=Ue(),n=await we(`assets/background/${i.background}`);t.clearRect(0,0,1024,768),t.drawImage(n,0,0);for(let a of i.objects)await Sr(a)}document.getElementById("form")?.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("input").value.trim(),n=Qe(t);n&&(window.location.hash=t,nt(n))});var Dr="[stgy:aLcnpxPulnsNdEvWZVSOgAvmgt4MN3i9kxbOQjW9HfobttiBlZ8KfzMlzhcEk98N2r7y-2D5Z3nZrh195ZnRNWORCB4XMwidyV2CX5k0S+ow+VNeEzhWhhfseFIH5ekbMGLBlcsD+2iKQBv1qbQyJ9TRRogiQHDlGXdycaI0qJwN7Ue3Ypz6bfC31Y4pBudPZ8Q7Rw8W1XL0Gfk6+Tavla1gPyvrs]",Ft=window.strategyCode||window.location.hash.substring(1),Ot=null;Ft!==""&&(console.log("Strategy board in hash:",Ft),Ot=Qe(window.decodeURIComponent(Ft),!0));Ot?nt(Ot):nt(Qe(Dr));})();
/*! Bundled license information:

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
