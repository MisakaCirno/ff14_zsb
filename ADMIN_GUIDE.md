# Django 管理后台使用指南

## 🎛️ 管理后台已启用！

Django 自带的管理后台已经完全配置并增强，提供了强大的数据管理功能。

## 🔐 访问管理后台

### 访问地址
```
http://127.0.0.1:8000/admin/
```

### 管理员账户
- **用户名**: `admin`
- **密码**: `admin123`

## ✨ 增强功能

### 1. 中文化界面
- 管理后台标题：**粘鼠板儿管理后台**
- 所有字段和操作都已中文化
- 日期时间使用中国时区

### 2. 分享管理增强

#### 列表显示
- 标题
- 分享ID
- 作者（显示昵称）
- 公开状态
- 浏览量
- 创建时间

#### 搜索功能
可以搜索：
- 标题
- 分享ID
- 描述
- 作者用户名
- 作者昵称

#### 筛选选项
- 公开/私有状态
- 创建时间
- 作者

#### 批量操作
- ✅ 批量设为公开
- ✅ 批量设为私有

#### 详细编辑
分组显示：
- **基本信息**：标题、作者、分享ID、公开状态
- **内容**：战术板代码、描述
- **统计信息**（可折叠）：浏览量、创建时间、更新时间

### 3. 用户管理增强

#### 用户列表显示
- 用户名
- 昵称
- 邮箱
- 管理员状态
- 活跃状态
- 注册时间

#### 用户编辑页面
- 用户基本信息
- **内联编辑用户资料**（昵称、个人简介）
- 权限设置
- 重要日期

#### 搜索功能
可以搜索：
- 用户名
- 邮箱
- 昵称

### 4. 用户资料管理

#### 列表显示
- 关联用户
- 昵称
- 分享数量
- 创建时间
- 更新时间

#### 详细编辑
分组显示：
- **用户信息**：关联的用户账户
- **个人资料**：昵称、个人简介
- **时间信息**（可折叠）：创建时间、更新时间

## 📋 常用操作

### 管理分享
1. 访问管理后台
2. 点击"战术板分享"
3. 可以：
   - 查看所有分享
   - 搜索特定分享
   - 按条件筛选
   - 编辑分享内容
   - 删除分享
   - 批量修改公开状态

### 管理用户
1. 访问管理后台
2. 点击"用户"
3. 可以：
   - 查看所有用户
   - 编辑用户信息
   - 修改用户权限
   - 激活/停用用户
   - 直接编辑用户昵称和简介

### 管理用户资料
1. 访问管理后台
2. 点击"用户资料"
3. 可以：
   - 查看所有用户资料
   - 编辑昵称和简介
   - 查看分享统计

## 🛠️ 高级功能

### 1. 批量操作
选择多个项目后，可以执行批量操作：
- 批量设置分享为公开/私有
- 批量删除（需要确认）

### 2. 日期层级浏览
在分享列表顶部，可以按年/月/日浏览分享：
- 点击年份查看该年所有分享
- 点击月份查看该月所有分享
- 点击日期查看当天所有分享

### 3. 字段排序
点击列表标题可以排序：
- 标题、作者、浏览量、创建时间等都可排序
- 再次点击可切换升序/降序

### 4. 过滤器
右侧过滤器可以快速筛选：
- 按公开状态筛选
- 按创建日期筛选（今天、过去7天、本月等）
- 按作者筛选

### 5. 内联编辑
在用户编辑页面，可以直接编辑用户资料，无需单独进入用户资料页面

## 📊 数据统计

### 查看统计信息
1. 用户管理页面可以看到用户昵称
2. 用户资料页面可以看到每个用户的分享数量
3. 分享页面可以看到浏览量统计

## 🔒 权限管理

### 创建管理员
```bash
python manage.py createsuperuser
```

### 创建普通员工
1. 在用户列表创建新用户
2. 勾选"职员状态"（允许登录管理后台）
3. 不勾选"超级用户状态"（仅普通权限）
4. 在权限部分选择允许的操作

### 权限类型
- **超级用户**：拥有所有权限
- **职员**：可以登录管理后台，权限可自定义
- **普通用户**：不能登录管理后台

## 💡 使用技巧

### 1. 快速搜索
在搜索框输入关键词，可以搜索：
- 分享：标题、ID、描述、作者
- 用户：用户名、邮箱、昵称

### 2. 组合筛选
可以同时使用多个筛选器：
- 搜索 + 过滤器
- 多个过滤条件组合

### 3. 导出数据
选择要导出的项目，使用浏览器打印功能可以保存为PDF

### 4. 查看详情
点击任意项目的标题可以进入详细编辑页面

### 5. 快速返回
使用顶部面包屑导航快速返回上级页面

## 🚨 注意事项

### 安全提示
1. **修改默认密码**
   ```bash
   # 登录后台后，在右上角点击"修改密码"
   或访问：http://127.0.0.1:8000/admin/password_change/
   ```

2. **不要删除超级管理员**
   - 至少保留一个超级管理员账户
   - 删除前确认有其他管理员

3. **谨慎使用批量删除**
   - 删除操作不可恢复
   - 删除前仔细确认

### 数据安全
1. 定期备份数据库
2. 限制管理后台访问IP（生产环境）
3. 使用强密码
4. 定期检查用户权限

## 📱 移动端访问

管理后台响应式设计，可以在移动设备上访问：
- 手机浏览器访问相同地址
- 使用相同的账户登录
- 界面会自动适配移动端

## 🔧 自定义配置

### 修改管理后台标题
在 `ffxivshare/urls.py` 中修改：
```python
admin.site.site_header = '你的标题'
admin.site.site_title = '你的标题'
admin.site.index_title = '你的欢迎信息'
```

### 每页显示数量
在 `shares/admin.py` 中修改：
```python
list_per_page = 20  # 修改为你想要的数量
```

## 📚 更多功能

### Django 管理后台内置功能
- ✅ 用户认证和权限管理
- ✅ 用户组管理
- ✅ 修改历史记录
- ✅ 最近操作记录
- ✅ 密码重置
- ✅ 数据导入导出（需要安装扩展）

### 可安装的增强插件
推荐插件：
- `django-import-export` - 数据导入导出
- `django-admin-charts` - 数据图表
- `django-admin-interface` - 美化界面
- `django-grappelli` - 高级管理界面

## 🆘 常见问题

### Q: 忘记管理员密码？
```bash
python manage.py changepassword admin
```

### Q: 如何添加新的模型到管理后台？
在 `admin.py` 中注册：
```python
from django.contrib import admin
from .models import YourModel

@admin.register(YourModel)
class YourModelAdmin(admin.ModelAdmin):
    list_display = ['field1', 'field2']
```

### Q: 如何自定义列表显示？
使用 `list_display`：
```python
list_display = ['field1', 'field2', 'custom_method']
```

### Q: 如何添加自定义操作？
```python
def custom_action(self, request, queryset):
    # 你的操作代码
    pass
custom_action.short_description = '操作描述'

actions = [custom_action]
```

## 🎯 快速链接

- **管理首页**: http://127.0.0.1:8000/admin/
- **分享管理**: http://127.0.0.1:8000/admin/shares/share/
- **用户管理**: http://127.0.0.1:8000/admin/auth/user/
- **用户资料**: http://127.0.0.1:8000/admin/shares/userprofile/
- **修改密码**: http://127.0.0.1:8000/admin/password_change/

---

**管理后台功能强大且易用，充分利用它来管理你的平台！** 🎉
